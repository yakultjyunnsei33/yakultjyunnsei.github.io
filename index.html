<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>プロスピAオーダーシミュレーター(ヤクルト純正)</title>
    <link rel="stylesheet" href="stylesheet.css">



</head>

<body>

    <b>
        <font size="5" color="red">オーダーシミュレーター</font>
        <br>

    </b>

    <br><button id="usage-toggle">使い方を表示</button>
    </br>
    <!-- アコーディオン本体（最初は非表示） -->
    <div id="usage-content"
        style="display: none; margin-top: 10px; background-color: #222; color: white; padding: 10px; border: 1px solid #555;">
        <h3>サイトの使い方</h3>
        <ol>
            <li>ポジションを選択してください。</li>
            <li>ポジションに応じて選手が選択できます。ポジション外では選択できません。</li>
            <li>選手を選択するとステータスが自動で表示されます。</li>
            <li>称号を選ぶとステータスが変化します。</li>
            <li>特守数値を押すと補正項目の変更ができます。特守によってスピリッツが11上昇する場合はサブポジを1から0に戻してください</li>
            <li>選手は名前順に並べています。レアリティはS1→覚醒→セレクション→TSの順に並べています。</li>

        </ol>
    </div>












    <div class="container">

        <table id="fielders-table" border="1">
            <thead>
                <tr>
                    <th> </th>
                    <th>ポジ</th>
                    <th>名前</th>
                    <th>ミ</th>
                    <th>パ</th>
                    <th>走</th>
                    <th>称号</th>
                    <th>スピ</th>
                    <th>特守数値</th>
                    <th>特守詳細</th>

                </tr>
            </thead>
            <tbody>

                <tr>
                    <td>1</td>
                    <!-- ポジション選択 -->
                    <td>
                        <select class="position">
                            <option value="">ポジ選択</option>
                            <option>捕手</option>
                            <option>一塁手</option>
                            <option>二塁手</option>
                            <option>三塁手</option>
                            <option>遊撃手</option>
                            <option>左翼手</option>
                            <option>中堅手</option>
                            <option>右翼手</option>
                            <option>指名打者</option>
                        </select>
                    </td>
                    <td><select class="player">
                            <option value="">野手を選択</option>
                        </select></td>
                    <td class="stat" data-base="0"></td>
                    <td class="stat" data-base="0"></td>
                    <td class="stat" data-base="0"></td>
                    <td><select class="title">
                            <option value="0,0,0,0,0">なし</option>
                        </select></td>
                    <td class="spirits" data-base="0">0</td>
                    <!-- 折りたたみトグルボタン -->
                    <td>
                        <button class="toggle-tokushu">Edit</button>
                    </td>

                    <!-- アコーディオン対象 -->
                    <td colspan="5">
                        <div class="tokushu-wrapper" style="display: none;">
                            <div class="tokushu-control">メイン
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">捕球
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">スロー
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">肩
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">サブ
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="1" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                        </div>
                    </td>

                <tr>
                    <td>2</td>
                    <!-- ポジション選択 -->
                    <td>
                        <select class="position">
                            <option value="">ポジ選択</option>
                            <option>捕手</option>
                            <option>一塁手</option>
                            <option>二塁手</option>
                            <option>三塁手</option>
                            <option>遊撃手</option>
                            <option>左翼手</option>
                            <option>中堅手</option>
                            <option>右翼手</option>
                            <option>指名打者</option>
                        </select>
                    </td>
                    <td><select class="player">
                            <option value="">野手を選択</option>
                        </select></td>
                    <td class="stat" data-base="0"></td>
                    <td class="stat" data-base="0"></td>
                    <td class="stat" data-base="0"></td>
                    <td><select class="title">
                            <option value="0,0,0,0,0">なし</option>
                        </select></td>
                    <td class="spirits" data-base="0">0</td>
                    <!-- 折りたたみトグルボタン -->
                    <td>
                        <button class="toggle-tokushu">Edit</button>
                    </td>

                    <!-- アコーディオン対象 -->
                    <td colspan="5">
                        <div class="tokushu-wrapper" style="display: none;">
                            <div class="tokushu-control">メイン
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">捕球
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">スローイング
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">肩力
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">サブポジ
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="1" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                        </div>
                    </td>

                <tr>
                    <td>3</td>
                    <!-- ポジション選択 -->
                    <td>
                        <select class="position">
                            <option value="">ポジ選択</option>
                            <option>捕手</option>
                            <option>一塁手</option>
                            <option>二塁手</option>
                            <option>三塁手</option>
                            <option>遊撃手</option>
                            <option>左翼手</option>
                            <option>中堅手</option>
                            <option>右翼手</option>
                            <option>指名打者</option>
                        </select>
                    </td>
                    <td><select class="player">
                            <option value="">野手を選択</option>
                        </select></td>
                    <td class="stat" data-base="0"></td>
                    <td class="stat" data-base="0"></td>
                    <td class="stat" data-base="0"></td>
                    <td><select class="title">
                            <option value="0,0,0,0,0">なし</option>
                        </select></td>
                    <td class="spirits" data-base="0">0</td>
                    <!-- 折りたたみトグルボタン -->
                    <td>
                        <button class="toggle-tokushu">Edit</button>
                    </td>

                    <!-- アコーディオン対象 -->
                    <td colspan="5">
                        <div class="tokushu-wrapper" style="display: none;">
                            <div class="tokushu-control">メイン
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">捕球
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">スローイング
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">肩力
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">サブポジ
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="1" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                        </div>
                    </td>

                <tr>
                    <td>4</td>
                    <!-- ポジション選択 -->
                    <td>
                        <select class="position">
                            <option value="">ポジ選択</option>
                            <option>捕手</option>
                            <option>一塁手</option>
                            <option>二塁手</option>
                            <option>三塁手</option>
                            <option>遊撃手</option>
                            <option>左翼手</option>
                            <option>中堅手</option>
                            <option>右翼手</option>
                            <option>指名打者</option>
                        </select>
                    </td>
                    <td><select class="player">
                            <option value="">野手を選択</option>
                        </select></td>
                    <td class="stat" data-base="0"></td>
                    <td class="stat" data-base="0"></td>
                    <td class="stat" data-base="0"></td>
                    <td><select class="title">
                            <option value="0,0,0,0,0">なし</option>
                        </select></td>
                    <td class="spirits" data-base="0">0</td>
                    <!-- 折りたたみトグルボタン -->
                    <td>
                        <button class="toggle-tokushu">Edit</button>
                    </td>

                    <!-- アコーディオン対象 -->
                    <td colspan="5">
                        <div class="tokushu-wrapper" style="display: none;">
                            <div class="tokushu-control">メイン
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">捕球
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">スローイング
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">肩力
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">サブポジ
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="1" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                        </div>
                    </td>

                <tr>
                    <td>5</td>
                    <!-- ポジション選択 -->
                    <td>
                        <select class="position">
                            <option value="">ポジ選択</option>
                            <option>捕手</option>
                            <option>一塁手</option>
                            <option>二塁手</option>
                            <option>三塁手</option>
                            <option>遊撃手</option>
                            <option>左翼手</option>
                            <option>中堅手</option>
                            <option>右翼手</option>
                            <option>指名打者</option>
                        </select>
                    </td>
                    <td><select class="player">
                            <option value="">野手を選択</option>
                        </select></td>
                    <td class="stat" data-base="0"></td>
                    <td class="stat" data-base="0"></td>
                    <td class="stat" data-base="0"></td>
                    <td><select class="title">
                            <option value="0,0,0,0,0">なし</option>
                        </select></td>
                    <td class="spirits" data-base="0">0</td>
                    <!-- 折りたたみトグルボタン -->
                    <td>
                        <button class="toggle-tokushu">Edit</button>
                    </td>

                    <!-- アコーディオン対象 -->
                    <td colspan="5">
                        <div class="tokushu-wrapper" style="display: none;">
                            <div class="tokushu-control">メイン
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">捕球
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">スローイング
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">肩力
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">サブポジ
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="1" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                        </div>
                    </td>



                <tr>
                    <td>6</td>
                    <!-- ポジション選択 -->
                    <td>
                        <select class="position">
                            <option value="">ポジ選択</option>
                            <option>捕手</option>
                            <option>一塁手</option>
                            <option>二塁手</option>
                            <option>三塁手</option>
                            <option>遊撃手</option>
                            <option>左翼手</option>
                            <option>中堅手</option>
                            <option>右翼手</option>
                            <option>指名打者</option>
                        </select>
                    </td>
                    <td><select class="player">
                            <option value="">野手を選択</option>
                        </select></td>
                    <td class="stat" data-base="0"></td>
                    <td class="stat" data-base="0"></td>
                    <td class="stat" data-base="0"></td>
                    <td><select class="title">
                            <option value="0,0,0,0,0">なし</option>
                        </select></td>
                    <td class="spirits" data-base="0">0</td>
                    <!-- 折りたたみトグルボタン -->
                    <td>
                        <button class="toggle-tokushu">Edit</button>
                    </td>

                    <!-- アコーディオン対象 -->
                    <td colspan="5">
                        <div class="tokushu-wrapper" style="display: none;">
                            <div class="tokushu-control">メイン
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">捕球
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">スローイング
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">肩力
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">サブポジ
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="1" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                        </div>
                    </td>

                <tr>
                    <td>7</td>
                    <!-- ポジション選択 -->
                    <td>
                        <select class="position">
                            <option value="">ポジ選択</option>
                            <option>捕手</option>
                            <option>一塁手</option>
                            <option>二塁手</option>
                            <option>三塁手</option>
                            <option>遊撃手</option>
                            <option>左翼手</option>
                            <option>中堅手</option>
                            <option>右翼手</option>
                            <option>指名打者</option>
                        </select>
                    </td>
                    <td><select class="player">
                            <option value="">野手を選択</option>
                        </select></td>
                    <td class="stat" data-base="0"></td>
                    <td class="stat" data-base="0"></td>
                    <td class="stat" data-base="0"></td>
                    <td><select class="title">
                            <option value="0,0,0,0,0">なし</option>
                        </select></td>
                    <td class="spirits" data-base="0">0</td>
                    <!-- 折りたたみトグルボタン -->
                    <td>
                        <button class="toggle-tokushu">Edit</button>
                    </td>

                    <!-- アコーディオン対象 -->
                    <td colspan="5">
                        <div class="tokushu-wrapper" style="display: none;">
                            <div class="tokushu-control">メイン
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">捕球
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">スローイング
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">肩力
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">サブポジ
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="1" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                        </div>
                    </td>


                <tr>
                    <td>8</td>
                    <!-- ポジション選択 -->
                    <td>
                        <select class="position">
                            <option value="">ポジ選択</option>
                            <option>捕手</option>
                            <option>一塁手</option>
                            <option>二塁手</option>
                            <option>三塁手</option>
                            <option>遊撃手</option>
                            <option>左翼手</option>
                            <option>中堅手</option>
                            <option>右翼手</option>
                            <option>指名打者</option>
                        </select>
                    </td>
                    <td><select class="player">
                            <option value="">野手を選択</option>
                        </select></td>
                    <td class="stat" data-base="0"></td>
                    <td class="stat" data-base="0"></td>
                    <td class="stat" data-base="0"></td>
                    <td><select class="title">
                            <option value="0,0,0,0,0">なし</option>
                        </select></td>
                    <td class="spirits" data-base="0">0</td>
                    <!-- 折りたたみトグルボタン -->
                    <td>
                        <button class="toggle-tokushu">Edit</button>
                    </td>

                    <!-- アコーディオン対象 -->
                    <td colspan="5">
                        <div class="tokushu-wrapper" style="display: none;">
                            <div class="tokushu-control">メイン
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">捕球
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">スローイング
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">肩力
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">サブポジ
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="1" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                        </div>
                    </td>


                <tr>
                    <td>9</td>
                    <!-- ポジション選択 -->
                    <td>
                        <select class="position">
                            <option value="">ポジ選択</option>
                            <option>捕手</option>
                            <option>一塁手</option>
                            <option>二塁手</option>
                            <option>三塁手</option>
                            <option>遊撃手</option>
                            <option>左翼手</option>
                            <option>中堅手</option>
                            <option>右翼手</option>
                            <option>指名打者</option>
                        </select>
                    </td>
                    <td><select class="player">
                            <option value="">野手を選択</option>
                        </select></td>
                    <td class="stat" data-base="0"></td>
                    <td class="stat" data-base="0"></td>
                    <td class="stat" data-base="0"></td>
                    <td><select class="title">
                            <option value="0,0,0,0,0">なし</option>
                        </select></td>
                    <td class="spirits" data-base="0">0</td>
                    <!-- 折りたたみトグルボタン -->
                    <td>
                        <button class="toggle-tokushu">Edit</button>
                    </td>

                    <!-- アコーディオン対象 -->
                    <td colspan="5">
                        <div class="tokushu-wrapper" style="display: none;">
                            <div class="tokushu-control">メイン
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">捕球
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">スローイング
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">肩力
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">サブポジ
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="1" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                        </div>
                    </td>

                <tr>
                    <td> </td>
                    <td bgcolor="blueviolet"> 代 </td>
                    <td><select class="player">
                            <option value="">野手を選択</option>
                        </select></td>
                    <td class="stat" data-base="0"></td>
                    <td class="stat" data-base="0"></td>
                    <td class="stat" data-base="0"></td>
                    <td><select class="title">
                            <option value="0,0,0,0,0">なし</option>
                        </select></td>
                    <td class="spirits" data-base="0">0</td>
                    <!-- 折りたたみトグルボタン -->
                    <td>
                        <button class="toggle-tokushu">Edit</button>
                    </td>

                    <!-- アコーディオン対象 -->
                    <td colspan="5">
                        <div class="tokushu-wrapper" style="display: none;">
                            <div class="tokushu-control">メイン
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">捕球
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">スローイング
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">肩力
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">サブポジ
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="1" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                        </div>
                    </td>

                <tr>
                    <td> </td>
                    <td bgcolor="blueviolet"> 代 </td>
                    <td><select class="player">
                            <option value="">野手を選択</option>
                        </select></td>
                    <td class="stat" data-base="0"></td>
                    <td class="stat" data-base="0"></td>
                    <td class="stat" data-base="0"></td>
                    <td><select class="title">
                            <option value="0,0,0,0,0">なし</option>
                        </select></td>
                    <td class="spirits" data-base="0">0</td>
                    <!-- 折りたたみトグルボタン -->
                    <td>
                        <button class="toggle-tokushu">Edit</button>
                    </td>

                    <!-- アコーディオン対象 -->
                    <td colspan="5">
                        <div class="tokushu-wrapper" style="display: none;">
                            <div class="tokushu-control">メイン
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">捕球
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">スローイング
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">肩力
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">サブポジ
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="1" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                        </div>
                    </td>


                <tr>
                    <td> </td>
                    <td bgcolor="blueviolet"> 代 </td>
                    <td><select class="player">
                            <option value="">野手を選択</option>
                        </select></td>
                    <td class="stat" data-base="0"></td>
                    <td class="stat" data-base="0"></td>
                    <td class="stat" data-base="0"></td>
                    <td><select class="title">
                            <option value="0,0,0,0,0">なし</option>
                        </select></td>
                    <td class="spirits" data-base="0">0</td>
                    <!-- 折りたたみトグルボタン -->
                    <td>
                        <button class="toggle-tokushu">Edit</button>
                    </td>

                    <!-- アコーディオン対象 -->
                    <td colspan="5">
                        <div class="tokushu-wrapper" style="display: none;">
                            <div class="tokushu-control">メイン
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">捕球
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">スローイング
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">肩力
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">サブポジ
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="1" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                        </div>
                    </td>


                <tr>
                    <td> </td>
                    <td bgcolor="blueviolet"> 代 </td>
                    <td><select class="player">
                            <option value="">野手を選択</option>
                        </select></td>
                    <td class="stat" data-base="0"></td>
                    <td class="stat" data-base="0"></td>
                    <td class="stat" data-base="0"></td>
                    <td><select class="title">
                            <option value="0,0,0,0,0">なし</option>
                        </select></td>
                    <td class="spirits" data-base="0">0</td>
                    <!-- 折りたたみトグルボタン -->
                    <td>
                        <button class="toggle-tokushu">Edit</button>
                    </td>

                    <!-- アコーディオン対象 -->
                    <td colspan="5">
                        <div class="tokushu-wrapper" style="display: none;">
                            <div class="tokushu-control">メイン
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">捕球
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">スローイング
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">肩力
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="2" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                            <div class="tokushu-control">サブポジ
                                <button class="minus-btn">-</button>
                                <input type="number" class="tokushu-input" min="0" max="1" value="0" readonly>
                                <button class="plus-btn">+</button>
                            </div>
                        </div>
                    </td>





                    <table id="pitchers-table" border="1">
                        <thead>
                            <tr>
                                <th> </th>
                                <th>ポジ</th>
                                <th>名前</th>
                                <th>球</th>
                                <th>制</th>
                                <th>ス</th>
                                <th>称号</th>
                                <th>スピ</th>
                                <th>B球種</B></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td bgcolor="red">先</td>
                                <td><select class="player">
                                        <option value="">投手を選択</option>
                                    </select></td>
                                <td class="stat" data-base="0"></td>
                                <td class="stat" data-base="0"></td>
                                <td class="stat" data-base="0"></td>
                                <td><select class="title">
                                        <option value="0,0,0,0,0">なし</option>
                                    </select></td>
                                <td class="spirits" data-base="0">0</td>
                                <td class="bPitchCount" data-base="0">0</td>
                            </tr>


                            <tr>

                                <td>2</td>

                                <td bgcolor="red">先</td>
                                <td><select class="player">
                                        <option value="">投手を選択</option>
                                    </select></td>
                                <td class="stat" data-base="0"></td>
                                <td class="stat" data-base="0"></td>
                                <td class="stat" data-base="0"></td>
                                <td><select class="title">
                                        <option value="0,0,0,0,0">なし</option>
                                    </select></td>
                                <td class="spirits" data-base="0">0</td>
                                <td class="bPitchCount" data-base="0">0</td>
                            </tr>

                            <tr>

                                <td>3</td>

                                <td bgcolor="red">先</td>
                                <td><select class="player">
                                        <option value="">投手を選択</option>
                                    </select></td>
                                <td class="stat" data-base="0"></td>
                                <td class="stat" data-base="0"></td>
                                <td class="stat" data-base="0"></td>
                                <td><select class="title">
                                        <option value="0,0,0,0,0">なし</option>
                                    </select></td>
                                <td class="spirits" data-base="0">0</td>
                                <td class="bPitchCount" data-base="0">0</td>
                            </tr>

                            <tr>

                                <td>4</td>

                                <td bgcolor="red">先</td>
                                <td><select class="player">
                                        <option value="">投手を選択</option>
                                    </select></td>
                                <td class="stat" data-base="0"></td>
                                <td class="stat" data-base="0"></td>
                                <td class="stat" data-base="0"></td>
                                <td><select class="title">
                                        <option value="0,0,0,0,0">なし</option>
                                    </select></td>
                                <td class="spirits" data-base="0">0</td>
                                <td class="bPitchCount" data-base="0">0</td>
                            </tr>

                            <tr>

                                <td>5</td>

                                <td bgcolor="red">先</td>
                                <td><select class="player">
                                        <option value="">投手を選択</option>
                                    </select></td>
                                <td class="stat" data-base="0"></td>
                                <td class="stat" data-base="0"></td>
                                <td class="stat" data-base="0"></td>
                                <td><select class="title">
                                        <option value="0,0,0,0,0">なし</option>
                                    </select></td>
                                <td class="spirits" data-base="0">0</td>
                                <td class="bPitchCount" data-base="0">0</td>
                            </tr>

                            <td>1</td>

                            <td bgcolor="red">継</td>
                            <td><select class="player">
                                    <option value="">投手を選択</option>
                                </select></td>
                            <td class="stat" data-base="0"></td>
                            <td class="stat" data-base="0"></td>
                            <td class="stat" data-base="0"></td>
                            <td><select class="title">
                                    <option value="0,0,0,0,0">なし</option>
                                </select></td>
                            <td class="spirits" data-base="0">0</td>
                            <td class="bPitchCount" data-base="0">0</td>
                </tr>

                <td>2</td>

                <td bgcolor="red">継</td>
                <td><select class="player">
                        <option value="">投手を選択</option>
                    </select></td>
                <td class="stat" data-base="0"></td>
                <td class="stat" data-base="0"></td>
                <td class="stat" data-base="0"></td>
                <td><select class="title">
                        <option value="0,0,0,0,0">なし</option>
                    </select></td>
                <td class="spirits" data-base="0">0</td>
                <td class="bPitchCount" data-base="0">0</td>
                </tr>

                <td>3</td>

                <td bgcolor="red">継</td>
                <td><select class="player">
                        <option value="">投手を選択</option>
                    </select></td>
                <td class="stat" data-base="0"></td>
                <td class="stat" data-base="0"></td>
                <td class="stat" data-base="0"></td>
                <td><select class="title">
                        <option value="0,0,0,0,0">なし</option>
                    </select></td>
                <td class="spirits" data-base="0">0</td>
                <td class="bPitchCount" data-base="0">0</td>
                </tr>

                <td>4</td>

                <td bgcolor="red">継</td>
                <td><select class="player">
                        <option value="">投手を選択</option>
                    </select></td>
                <td class="stat" data-base="0"></td>
                <td class="stat" data-base="0"></td>
                <td class="stat" data-base="0"></td>
                <td><select class="title">
                        <option value="0,0,0,0,0">なし</option>
                    </select></td>
                <td class="spirits" data-base="0">0</td>
                <td class="bPitchCount" data-base="0">0</td>
                </tr>

                <td> </td>

                <td bgcolor="red">抑</td>
                <td><select class="player">
                        <option value="">投手を選択</option>
                    </select></td>
                <td class="stat" data-base="0"></td>
                <td class="stat" data-base="0"></td>
                <td class="stat" data-base="0"></td>
                <td><select class="title">
                        <option value="0,0,0,0,0">なし</option>
                    </select></td>
                <td class="spirits" data-base="0">0</td>
                <td class="bPitchCount" data-base="0">0</td>
                </tr>

                <td> </td>

                <td bgcolor="red">ベ</td>
                <td><select class="player">
                        <option value="">投手を選択</option>
                    </select></td>
                <td class="stat" data-base="0"></td>
                <td class="stat" data-base="0"></td>
                <td class="stat" data-base="0"></td>
                <td><select class="title">
                        <option value="0,0,0,0,0">なし</option>
                    </select></td>
                <td class="spirits" data-base="0">0</td>
                <td class="bPitchCount" data-base="0">0</td>
                </tr>
    </div>
    </tbody>
    </table>






    </h3>
    <p>コンボの計算は以下のサイトを参考にしています。<a href="https://proace.info/COMBO/" target="_blank" rel="noopener noreferrer">
            プロスピA攻略|なにしてんねんデータベース様</a></p>




    <p>TS候補は以下のサイトで参照できます。</p>

    <iframe class="note-embed" src="https://note.com/embed/notes/n95d5247a8ac7"
        style="border: 0; display: block; max-width: 99%; width: 494px; padding: 0px; margin: 10px 0px; position: static; visibility: visible;"
        height="400"></iframe>
    <script async src="https://note.com/scripts/embed.js" charset="utf-8"></script>
    <br>
    <p id="hitterStats">ミート型: 0人, パワー型: 0人, 走力型: 0人</p>
    <p id="pitcherStats">球威型: 0人, 制球型: 0人, スタミナ型: 0人</p>
    <br>
    <p>合計スピリッツ: <span id="totalSpirits">0</span></p>
    <p>発動コンボの合計: <span id="totalCombo">0</span></p>
    <br>
    <p>最大コンボ上昇量: <span id="maxCombo">0</span></p>
    <br>
    <div id="comboList">発動コンボ(上昇量)</div>
    <br>









    <script>
        const playerData = {



            "S2伊藤琉偉": {
                "type": "野手", "stat1": 60, "stat2": 65, "stat3": 73, "spirits": 5000, "abilities": ["超代打", "走塁", "ライドラ"], "battingSide": "右",
                "mainPosition": {
                    "name": "遊撃手",
                    "適性": 61
                },
                "subPositions": [
                    { "name": "三撃手", "適性": 57 },
                    { "name": "右翼手", "適性": 57 }

                ],
                "fielding": {
                    "捕球": 43,
                    "スローイング": 56,
                    "肩力": 67
                }
            },



            "S1岩田幸宏": {
                "type": "野手", "stat1": 60, "stat2": 61, "stat3": 81, "spirits": 4900, "abilities": ["超流し打ち", "走塁", "内野安打"], "battingSide": "左",
                "mainPosition": {
                    "name": "中堅手",
                    "適性": 70
                },
                "subPositions": [
                    { "name": "左翼手", "適性": 67 },
                    { "name": "右翼手", "適性": 67 }

                ],
                "fielding": {
                    "捕球": 41,
                    "スローイング": 52,
                    "肩力": 55
                }
            },

            "S2岩田幸宏": {
                "type": "野手", "stat1": 65, "stat2": 63, "stat3": 81, "spirits": 5000, "abilities": ["超流し打ち", "走塁", "内野安打"], "battingSide": "左",
                "mainPosition": {
                    "name": "中堅手",
                    "適性": 70
                },
                "subPositions": [
                    { "name": "左翼手", "適性": 67 },
                    { "name": "右翼手", "適性": 67 }

                ],
                "fielding": {
                    "捕球": 41,
                    "スローイング": 52,
                    "肩力": 55
                }
            },

            "S1内山壮真": {
                "type": "野手", "stat1": 67, "stat2": 65, "stat3": 70, "spirits": 4900, "abilities": ["超チャンス", "粘りうち", "広角"], "battingSide": "右",
                "mainPosition": {
                    "name": "左翼手",
                    "適性": 58
                },
                "subPositions": [
                    { "name": "捕手", "適性": 50 },
                    { "name": "中堅手", "適性": 55 },
                    { "name": "右翼手", "適性": 58 }
                ],
                "fielding": {
                    "捕球": 46,
                    "スローイング": 61,
                    "肩力": 64
                }
            },
            "S1太田賢吾": {
                "type": "野手", "stat1": 64, "stat2": 63, "stat3": 75, "spirits": 4900, "abilities": ["超固め打ち", "走塁", "連打"], "battingSide": "左",
                "mainPosition": {
                    "name": "右翼手",
                    "適性": 57
                },
                "subPositions": [
                    { "name": "一塁手", "適性": 57 },
                    { "name": "二翼手", "適性": 64 },
                    { "name": "三塁手", "適性": 50 },
                    { "name": "左翼手", "適性": 56 },
                    { "name": "遊撃手", "適性": 46 },
                    { "name": "中堅手", "適性": 57 }

                ],
                "fielding": {
                    "捕球": 37,
                    "スローイング": 43,
                    "肩力": 66
                }
            },
            "S1オスナ": {
                "type": "野手", "stat1": 73, "stat2": 76, "stat3": 56, "spirits": 4900, "abilities": ["超ライドラ", "フルスイング", "チャンス"], "battingSide": "右",
                "mainPosition": {
                    "name": "一塁手",
                    "適性": 61
                }, "fielding": { "捕球": 51, "スローイング": 53, "肩力": 78 },
                "subPositions": [] // 明示的に空配列を追加

            },
            "S1川端慎吾": {
                "type": "野手", "stat1": 72, "stat2": 65, "stat3": 69, "spirits": 4900, "abilities": ["超代打の神様", "アベレージヒッター", "いぶし銀"], "battingSide": "左",
                "mainPosition": {
                    "name": "一塁手",
                    "適性": 53
                }, "fielding": { "捕球": 40, "スローイング": 53, "肩力": 56 },
                "subPositions": [] // 明示的に空配列を追加
            },

            "S1北村拓己": {
                "type": "野手", "stat1": 58, "stat2": 60, "stat3": 64, "spirits": 4900, "abilities": ["超粘りうち", "走塁", "ライドラ"], "battingSide": "右",
                "mainPosition": {
                    "name": "二塁手",
                    "適性": 67
                },
                "subPositions": [
                    { "name": "一塁手", "適性": 57 },
                    { "name": "遊撃手", "適性": 67 },
                    { "name": "三塁手", "適性": 67 }

                ],
                "fielding": {
                    "捕球": 51,
                    "スローイング": 50,
                    "肩力": 48
                }
            },
            "S1古賀優大": {
                "type": "野手", "stat1": 60, "stat2": 59, "stat3": 61, "spirits": 4900, "abilities": ["超捕手", "対左投手", "チャンメ"], "battingSide": "右",
                "mainPosition": {
                    "name": "捕手",
                    "適性": 61
                }, "fielding": { "捕球": 45, "スローイング": 62, "肩力": 77 },
                "subPositions": [] // 明示的に空配列を追加
            },

            "S1澤井廉": {
                "type": "野手", "stat1": 56, "stat2": 63, "stat3": 62, "spirits": 4900, "abilities": ["超初球", "粘りうち", "流し打ち"], "battingSide": "左",
                "mainPosition": {
                    "name": "右翼手",
                    "適性": 48
                },
                "subPositions": [

                    { "name": "左翼手", "適性": 48 }
                ],
                "fielding": {
                    "捕球": 40,
                    "スローイング": 52,
                    "肩力": 53
                }
            },

            "S1サンタナ": {
                "type": "野手", "stat1": 80, "stat2": 79, "stat3": 63, "spirits": 4900, "abilities": ["超広角", "ライドラ", "アベヒ"], "battingSide": "右",
                "mainPosition": {
                    "name": "左翼手",
                    "適性": 48
                }, "fielding": { "捕球": 38, "スローイング": 45, "肩力": 75 },
                "subPositions": [] // 明示的に空配列を追加
            },

            "S1塩見泰隆": {
                "type": "野手", "stat1": 75, "stat2": 75, "stat3": 82, "spirits": 4900, "abilities": ["超広角", "チャンメ", "選球眼"], "battingSide": "右",
                "mainPosition": {
                    "name": "中堅手",
                    "適性": 73
                },
                "fielding": {
                    "捕球": 45,
                    "スローイング": 50,
                    "肩力": 60,
                    "subPositions": [] // 明示的に空配列を追加
                }
            },

            "S1武岡龍世": {
                "type": "野手", "stat1": 56, "stat2": 62, "stat3": 74, "spirits": 4900, "abilities": ["超代打の神様", "粘りうち", "意外性"], "battingSide": "右",
                "mainPosition": {
                    "name": "二塁手",
                    "適性": 62
                },
                "subPositions": [
                    { "name": "遊撃手", "適性": 62 },
                    { "name": "三塁手", "適性": 51 }

                ],
                "fielding": {
                    "捕球": 42,
                    "スローイング": 45,
                    "肩力": 64
                }
            },



            "S1中村悠平": {
                "type": "野手", "stat1": 67, "stat2": 64, "stat3": 66, "spirits": 4900,
                "abilities": ["超捕手", "流し打ち", "選球眼"], "battingSide": "右",
                "mainPosition": { "name": "捕手", "適性": 69 },
                "fielding": { "捕球": 60, "スローイング": 77, "肩力": 82 },
                "subPositions": [] // 明示的に空配列を追加
            },

             "S2中村悠平": {
                "type": "野手", "stat1": 65, "stat2": 62, "stat3": 66, "spirits": 5000,
                "abilities": ["超捕手", "流し打ち", "選球眼"], "battingSide": "右",
                "mainPosition": { "name": "捕手", "適性": 69 },
                "fielding": { "捕球": 60, "スローイング": 77, "肩力": 82 },
                "subPositions": [] // 明示的に空配列を追加
            },
            "S1長岡秀樹": {
                "type": "野手", "stat1": 76, "stat2": 69, "stat3": 73, "spirits": 4900, "abilities": ["超流し打ち", "チャンス", "逆境"], "battingSide": "左",
                "mainPosition": {
                    "name": "遊撃手",
                    "適性": 70
                }, "fielding": { "捕球": 65, "スローイング": 71, "肩力": 67 },
                "subPositions": [] // 明示的に空配列を追加
            },

            "S1西川遥輝": {
                "type": "野手", "stat1": 66, "stat2": 64, "stat3": 85, "spirits": 4900, "abilities": ["超選球眼", "ラインドライブ", "粘りうち"], "battingSide": "左",
                "mainPosition": {
                    "name": "中堅手",
                    "適性": 61
                },
                "subPositions": [
                    { "name": "左翼手", "適性": 64 },
                    { "name": "右翼手", "適性": 64 }

                ],
                "fielding": {
                    "捕球": 43,
                    "スローイング": 62,
                    "肩力": 40
                }
            },
            "S1濱田太貴": {
                "type": "野手", "stat1": 59, "stat2": 70, "stat3": 70, "spirits": 4900, "abilities": ["超流し打ち", "粘りうち", "逆境"], "battingSide": "右",
                "mainPosition": {
                    "name": "左翼手",
                    "適性": 52
                },
                "subPositions": [
                    { "name": "中堅手", "適性": 51 },
                    { "name": "右翼手", "適性": 60 }

                ],
                "fielding": {
                    "捕球": 41,
                    "スローイング": 46,
                    "肩力": 59
                }
            },
            "S1増田珠": {
                "type": "野手", "stat1": 57, "stat2": 65, "stat3": 70, "spirits": 4900, "abilities": ["超初球", "粘りうち", "固め打ち"], "battingSide": "右",
                "mainPosition": {
                    "name": "右翼手",
                    "適性": 54
                },
                "subPositions": [
                    { "name": "一塁手", "適性": 55 },
                    { "name": "左翼手", "適性": 54 },
                    { "name": "中堅手", "適性": 49 }

                ],
                "fielding": {
                    "捕球": 46,
                    "スローイング": 43,
                    "肩力": 51
                }
            },

            "S1松本直樹": {
                "type": "野手", "stat1": 66, "stat2": 63, "stat3": 63, "spirits": 4900, "abilities": ["超チャンス", "粘りうち", "代打"], "battingSide": "右",
                "mainPosition": {
                    "name": "捕手",
                    "適性": 60
                }, "fielding": { "捕球": 48, "スローイング": 54, "肩力": 84 },
                "subPositions": [] // 明示的に空配列を追加
            },

            "S1丸山和郁": {
                "type": "野手", "stat1": 66, "stat2": 64, "stat3": 83, "spirits": 4900, "abilities": ["超チャンメ", "選球眼", "内野安打"], "battingSide": "左",
                "mainPosition": {
                    "name": "中堅手",
                    "適性": 60
                },
                "subPositions": [
                    { "name": "左翼手", "適性": 60 },
                    { "name": "右翼手", "適性": 60 }

                ],
                "fielding": {
                    "捕球": 53,
                    "スローイング": 50,
                    "肩力": 68
                }
            },

            "S1宮本丈": {
                "type": "野手", "stat1": 66, "stat2": 62, "stat3": 70, "spirits": 4900, "abilities": ["超チャンメ", "選球眼", "初球"], "battingSide": "右",
                "mainPosition": {
                    "name": "右翼手",
                    "適性": 60
                },
                "subPositions": [
                    { "name": "左翼手", "適性": 57 },
                    { "name": "一塁手", "適性": 56 },
                    { "name": "二塁手", "適性": 60 },
                    { "name": "三塁手", "適性": 57 }
                ],
                "fielding": {
                    "捕球": 57,
                    "スローイング": 54,
                    "肩力": 45
                }
            },

            "S1村上宗隆": {
                "type": "野手", "stat1": 78, "stat2": 84, "stat3": 71, "spirits": 4900, "abilities": ["超アーチ", "広角", "威圧感"], "battingSide": "左",
                "mainPosition": {
                    "name": "三塁手",
                    "適性": 58
                },
                "subPositions": [
                    { "name": "一塁手", "適性": 58 },
                    { "name": "右翼手", "適性": 51 }

                ],
                "fielding": {
                    "捕球": 36,
                    "スローイング": 42,
                    "肩力": 61
                }
            },

            "S1茂木栄五郎": {
                "type": "野手", "stat1": 68, "stat2": 67, "stat3": 75, "spirits": 4900, "abilities": ["超代打", "走塁", "ライドラ"], "battingSide": "左",
                "mainPosition": {
                    "name": "二塁手",
                    "適性": 57
                },
                "subPositions": [
                    { "name": "三撃手", "適性": 63 },
                    { "name": "一塁手", "適性": 57 }

                ],
                "fielding": {
                    "捕球": 65,
                    "スローイング": 71,
                    "肩力": 59
                }
            },



            "S1山田哲人": {
                "type": "野手", "stat1": 65, "stat2": 76, "stat3": 79, "spirits": 4900, "abilities": ["超パワヒ", "プルヒ", "選球眼"], "battingSide": "右",
                "mainPosition": {
                    "name": "二塁手",
                    "適性": 73
                }, "fielding": { "捕球": 78, "スローイング": 79, "肩力": 65 },
                "subPositions": [] // 明示的に空配列を追加
            },

             "S2山田哲人": {
                "type": "野手", "stat1": 64, "stat2": 74, "stat3": 78, "spirits": 5000, "abilities": ["超パワヒ", "プルヒ", "選球眼"], "battingSide": "右",
                "mainPosition": {
                    "name": "二塁手",
                    "適性": 69
                }, "fielding": { "捕球": 73, "スローイング": 79, "肩力": 65 },
                "subPositions": [] // 明示的に空配列を追加
            },


            "セレ古田敦也": {
                "type": "野手", "stat1": 81, "stat2": 79, "stat3": 67, "spirits": 4900,
                "abilities": ["超捕手", "アベレージヒッター", "チャンス"], "battingSide": "右",
                "mainPosition": { "name": "捕手", "適性": 89 },
                "fielding": { "捕球": 78, "スローイング": 85, "肩力": 94 },
                "subPositions": [] // 明示的に空配列を追加
            },


            "セレサンタナ": {
                "type": "野手", "stat1": 81, "stat2": 80, "stat3": 64, "spirits": 5000, "abilities": ["超広角", "ライドラ", "アベヒ"], "battingSide": "右",
                "mainPosition": {
                    "name": "左翼手",
                    "適性": 48
                }, "fielding": { "捕球": 38, "スローイング": 45, "肩力": 75 },
                "subPositions": [] // 明示的に空配列を追加
            },


            "EX村上宗隆": {
                "type": "野手", "stat1": 79, "stat2": 85, "stat3": 72, "spirits": 4900, "abilities": ["超アーチ", "広角", "熱気"], "battingSide": "左",
                "mainPosition": {
                    "name": "三塁手",
                    "適性": 58
                },
                "subPositions": [
                    { "name": "一塁手", "適性": 58 },
                    { "name": "右翼手", "適性": 51 }

                ],
                "fielding": {
                    "捕球": 36,
                    "スローイング": 42,
                    "肩力": 61
                }
            },





















            "TS稲葉篤紀": {
                "type": "野手", "stat1": 79, "stat2": 76, "stat3": 70, "spirits": 4900, "abilities": ["超ライドラ", "走塁", "チャンス"], "battingSide": "左",
                "mainPosition": {
                    "name": "右翼手",
                    "適性": 76
                },
                "subPositions": [

                    { "name": "中堅手", "適性": 66 }

                ],
                "fielding": {
                    "捕球": 58,
                    "スローイング": 83,
                    "肩力": 69
                }
            },

            "TS川端慎吾": {
                "type": "野手", "stat1": 83, "stat2": 68, "stat3": 74, "spirits": 4900, "abilities": ["超アベヒ", "流し打ち", "固め打ち"], "battingSide": "左",
                "mainPosition": {
                    "name": "三塁手",
                    "適性": 60
                },
                "subPositions": [
                    { "name": "一塁手", "適性": 51 },
                    { "name": "二塁手", "適性": 47 },
                    { "name": "遊撃手", "適性": 57 }

                ],
                "fielding": {
                    "捕球": 50,
                    "スローイング": 53,
                    "肩力": 58
                }
            },

            
            "TS山田哲人": {
                "type": "野手", "stat1": 84, "stat2": 84, "stat3": 80, "spirits": 4900, "abilities": ["超パワヒ", "アベレージヒッター", "盗塁"], "battingSide": "右",
                "mainPosition": {
                    "name": "二塁手",
                    "適性": 69
                },
                "subPositions": [

                    { "name": "一塁手", "適性": 52 },

                    { "name": "三塁手", "適性": 54 }
                ], "fielding": { "捕球": 69, "スローイング": 50, "肩力": 65 }
            },





            

            "S1アビラ": {
                "type": "投手", "stat1": 70, "stat2": 61, "stat3": 71, "spirits": 4900, "abilities": ["超対左打者", "対強打者", "存在感"], "bPitchCount": 1, "mainPosition": { "name": "先" }
            },

            "S1石川雅規": {
                "type": "投手", "stat1": 68, "stat2": 80, "stat3": 70, "spirits": 4900, "abilities": ["超コントロール", "緩急", "打たれ強さ"], "bPitchCount": 1, "mainPosition": { "name": "先" }
            },

            "S1石山泰稚": {
                "type": "投手", "stat1": 73, "stat2": 76, "stat3": 64, "spirits": 4900, "abilities": ["超キレ", "ノビ", "奪三振"], "bPitchCount": 2, "mainPosition": { "name": "継" }, // 主ポジション: 先
                "subPositions": [
                    { "name": "抑" } // 副ポジション: 継
                ]
            },

            "S1大西広樹": {
                "type": "投手", "stat1": 73, "stat2": 79, "stat3": 67, "spirits": 4900, "abilities": ["超対ピンチ", "グラウンドボーラー", "コントロール"], "bPitchCount": 1, "mainPosition": { "name": "継" }
            },
            "S1小川泰弘": {
                "type": "投手", "stat1": 72, "stat2": 82, "stat3": 80, "spirits": 4900, "abilities": ["超コントロール", "球持ち", "キレ"], "bPitchCount": 1, "mainPosition": { "name": "先" },
                "subPositions": [
                    { "name": "継" }
                ]

            },

            "S1奥川恭伸": {
                "type": "投手", "stat1": 73, "stat2": 75, "stat3": 75, "spirits": 4900, "abilities": ["超奪三振", "キレ", "援護"], "bPitchCount": 1, "mainPosition": { "name": "先" },
                "subPositions": [
                    { "name": "継" }
                ]
            },




            "S1木澤尚文": {
                "type": "投手", "stat1": 74, "stat2": 72, "stat3": 65, "spirits": 4900, "abilities": ["超キレ", "対ピンチ", "対右打者"], "bPitchCount": 2, "mainPosition": { "name": "継" }, // 主ポジション: 先
                "subPositions": [
                    { "name": "抑" } // 副ポジション: 継
                ]
            },

            "S1小澤怜司": {
                "type": "投手", "stat1": 75, "stat2": 71, "stat3": 72, "spirits": 4900, "abilities": ["超ノビ", "緩急", "対ランナー"], "bPitchCount": 1, "mainPosition": { "name": "抑" }, // 主ポジション: 先
                "subPositions": [
                    { "name": "継" }, { "name": "先" }// 副ポジション: 継
                ]

            },
             "S2小澤怜司": {
                "type": "投手", "stat1": 74, "stat2": 70, "stat3": 71, "spirits": 5000, "abilities": ["超ノビ", "緩急", "対ランナー"], "bPitchCount": 1, "mainPosition": { "name": "継" }, // 主ポジション: 先
                "subPositions": [
                    { "name": "抑え" }, { "name": "先" }// 副ポジション: 継
                ]

            },

            "S1清水昇": {
                "type": "投手", "stat1": 75, "stat2": 76, "stat3": 65, "spirits": 4900, "abilities": ["超対ピンチ", "キレ", "コントロール"], "bPitchCount": 1, "mainPosition": { "name": "継" }
            },

            "S1荘司宏太": {
                "type": "投手", "stat1": 73, "stat2": 67, "stat3": 65, "spirits": 4900, "abilities": ["奥行き", "キレ", "ノビ"], "bPitchCount": 0, "mainPosition": { "name": "継" }
            },


            "S1高橋圭二": {
                "type": "投手", "stat1": 76, "stat2": 68, "stat3": 74, "spirits": 4900, "abilities": ["超ノビ", "奪三振", "キレ"], "bPitchCount": 1, "mainPosition": { "name": "先" },
                "subPositions": [
                    { "name": "継" }
                ]


            },
            "S1高梨裕稔": {
                "type": "投手", "stat1": 73, "stat2": 74, "stat3": 70, "spirits": 4900, "abilities": ["超対ピンチ", "奪三振", "ノビ"], "bPitchCount": 1, "mainPosition": { "name": "先" }, // 主ポジション: 先
                "subPositions": [
                    { "name": "継" }
                ]
            },


            "S1田口麗人": {
                "type": "投手", "stat1": 76, "stat2": 75, "stat3": 71, "spirits": 4900, "abilities": ["超キレ", "緩急", "内角"], "bPitchCount": 3, "mainPosition": { "name": "継" }
            },






            "S1長谷川宙輝": {
                "type": "投手", "stat1": 73, "stat2": 66, "stat3": 68, "spirits": 4900, "abilities": ["超奪三振", "キレ", "荒れ球"], "bPitchCount": 0, "mainPosition": { "name": "継" }
            },

            "S1星知弥": {
                "type": "投手", "stat1": 73, "stat2": 67, "stat3": 67, "spirits": 4900, "abilities": ["超豪速球", "ノビ", "内角"], "bPitchCount": 2, "mainPosition": { "name": "継" }, // 主ポジション: 先
                "subPositions": [
                    { "name": "抑" } // 副ポジション: 継
                ]
            },
            "S1丸山翔太": {
                "type": "投手", "stat1": 74, "stat2": 61, "stat3": 61, "spirits": 4900, "abilities": ["超キレ", "奪三振", "打たれ強さ"], "bPitchCount": 0, "mainPosition": { "name": "継" }
            },





            "S1山野太一": {
                "type": "投手", "stat1": 70, "stat2": 72, "stat3": 70, "spirits": 4900, "abilities": ["超キレ", "援護", "ノビ"], "bPitchCount": 0, "mainPosition": { "name": "先" }, // 主ポジション: 先
                "subPositions": [
                    { "name": "継" } // 副ポジション: 継
                ]
            },


            "S1山本大貴": {
                "type": "投手", "stat1": 77, "stat2": 61, "stat3": 63, "spirits": 4900, "abilities": ["超グランドボーラー", "対ピンチ", "キレ"], "bPitchCount": 2, "mainPosition": { "name": "継" },
                "subPositions": [
                    { "name": "抑" } // 副ポジション: 継
                ]
            },

            "S1吉村貢司郎": {
                "type": "投手", "stat1": 73, "stat2": 73, "stat3": 75, "spirits": 4900, "abilities": ["超キレ", "ノビ", "安定感"], "bPitchCount": 2, "mainPosition": { "name": "先" }
            },

            "S1ランバート": {
                "type": "投手", "stat1": 70, "stat2": 70, "stat3": 70, "spirits": 4900, "abilities": ["超キレ", "打たれ強さ", "奥行き"], "bPitchCount": 0, "mainPosition": { "name": "先" }
            },
             "S2ランバート": {
                "type": "投手", "stat1": 72, "stat2": 70, "stat3": 72, "spirits": 5000, "abilities": ["超キレ", "ノビ", "豪速球"], "bPitchCount": 0, "mainPosition": { "name": "先" }
            },


            "覚醒中村優斗": {
                "type": "投手", "stat1": 70, "stat2": 61, "stat3": 71, "spirits": 4800, "abilities": ["超豪速球", "奪三振", "キレ"], "bPitchCount": 0, "mainPosition": { "name": "先" }
            },
            "覚醒バウマン": {
                "type": "投手", "stat1": 71, "stat2": 55, "stat3": 59, "spirits": 4800, "abilities": ["超豪速球", "ノビ", "奪三振"], "bPitchCount": 2, "mainPosition": { "name": "継" }
            },


            "覚醒矢崎拓也": {
                "type": "投手", "stat1": 73, "stat2": 60, "stat3": 69, "spirits": 4800, "abilities": ["超キレ", "ノビ", "打たれ強さ"], "bPitchCount": 1, "mainPosition": { "name": "抑" }, // 主ポジション: 先
                "subPositions": [
                    { "name": "継" } // 副ポジション: 継
                ]
            },

            "セレ木澤尚文": {
                "type": "投手", "stat1": 75, "stat2": 73, "stat3": 66, "spirits": 5000, "abilities": ["超キレ", "対ピンチ", "対右打者"], "bPitchCount": 2, "mainPosition": { "name": "継" }, // 主ポジション: 先
                "subPositions": [
                    { "name": "抑" } // 副ポジション: 継
                ]
            },

            "セレ小川泰弘": {
                "type": "投手", "stat1": 76, "stat2": 74, "stat3": 76, "spirits": 5000, "abilities": ["超援護", "球持ち", "対ランナー"], "bPitchCount": 0, "mainPosition": { "name": "先" },
                "subPositions": [
                    { "name": "継" }, { "name": "抑" }
                ]

            },


            "EX大西広樹": {
                "type": "投手", "stat1": 74, "stat2": 80, "stat3": 68, "spirits": 4900, "abilities": ["超対ピンチ", "グラウンドボーラー", "熱気"], "bPitchCount": 1, "mainPosition": { "name": "継" }
            },







           




          

            "TS高津臣吾": {
                "type": "投手", "stat1": 82, "stat2": 80, "stat3": 63, "spirits": 4900, "abilities": ["超対ピンチ", "キレ", "存在感"], "bPitchCount": 1, "mainPosition": { "name": "先" }, // 主ポジション: 先
                "subPositions": [
                    { "name": "継" }, { "name": "抑" }// 副ポジション: 継
                ]
            },

          

            "TS由規": {
                "type": "投手", "stat1": 78, "stat2": 61, "stat3": 79, "spirits": 4900, "abilities": ["超豪速球", "奪三振", "荒れ球"], "bPitchCount": 1, "mainPosition": { "name": "先" }
            },


        }
            ;

        const titles = {
            "野手": [
                { text: "なし", value: "0,0,0,0,0" },
                { text: "勝利の使者(スピ+30)", value: "0,0,0,30,1" },
                { text: "強心臓(スピ+15)", value: "0,0,0,15,1" },
                { text: "安打製造機(ミート+3,パワー+1)", value: "3,1,0,0,0" },
                { text: "打撃を極めし者(ミート+2,パワー+1,走力+1)", value: "2,1,1,0,0" },
                { text: "バズーカー(ミート+1,パワー+3)", value: "1,3,0,0,0" },
                { text: "電光石火(ミート+2,走力+2)", value: "2,0,2,0,0" },
                { text: "脅威のスラッガー(ミート+2,パワー+2)", value: "2,2,0,0,0" },
                { text: "好球必打(ミート+3)", value: "3,0,0,0,0" },
                { text: "超人(ミート+2,走力+1)", value: "2,0,1,0,0" },
                { text: "稲妻(パワー+2,走力+1)", value: "0,2,1,0,0" },
                { text: "スナイパー(ミート+2,パワー+1)", value: "2,1,0,0,0" },
                { text: "飛ばし屋(ミート+1,パワー+2)", value: "1,2,0,0,0" },
                { text: "怪力無双(パワー+3)", value: "0,3,0,0,0" },
                { text: "圧倒的ミート(ミート+2)", value: "2,0,0,0,0" },
                { text: "圧倒的パワー(パワー+2)", value: "0,2,0,0,0" },
                { text: "コンタクトヒッター(ミート+3,パワー-1)", value: "3,-1,0,0,0" },
                { text: "ミスターフルスイング(ミート-1,パワー+3)", value: "-1,3,0,0,0" },
                { text: "切り込み隊長(ミート+1,走力+1)", value: "1,0,1,0,0" },
                { text: "ラン＆ガン(パワー+1,走力+1)", value: "0,1,1,0,0" },
                { text: "強打者(ミート+1,パワー+1)", value: "1,1,0,0,0" },
                { text: "反骨精神(ミート-1,パワー+2,スピ+10)", value: "-1,2,0,10,1" },
                { text: "ミート自慢(ミート+1)", value: "1,0,0,0,0" },
                { text: "パワー自慢(パワー+1)", value: "0,1,0,0,0" },
                { text: "大砲(ミート-1,パワー+2)", value: "-1,2,0,0,0" },
                { text: "打撃職人(ミート+2,パワー-1)", value: "2,-1,0,0,0" }
            ],
            "投手": [
                { text: "なし", value: "0,0,0,0,0" },
                { text: "勝利の使者(スピ+30)", value: "0,0,0,30,1" },
                { text: "強心臓(スピ+15)", value: "0,0,0,15,1" },
                { text: "火の玉ボール(球威+3,制球+1)", value: "3,1,0,0,0" },
                { text: "ミスターコントロール(球威+1,制球+3)", value: "1,3,0,0,0" },
                { text: "永久機関(球威+2,スタミナ+2)", value: "2,0,2,0,0" },
                { text: "超特急(球威+3,スタミナ+1)", value: "3,0,1,0,0" },
                { text: "魂の投球(球威+2,制球+2)", value: "2,2,0,0,0" },
                { text: "うなる剛腕(球威+3)", value: "3,0,0,0,0" },
                { text: "技巧派(球威+1,制球+2)", value: "1,2,0,0,0" },
                { text: "精密機械(制球+3)", value: "0,3,0,0,0" },
                { text: "本格派(球威+2,制球+1)", value: "2,1,0,0,0" },
                { text: "不屈の闘志(球威+2,スタミナ+1)", value: "2,0,1,0,0" },
                { text: "鉄腕(スタミナ+3)", value: "0,0,3,0,0" },
                { text: "圧倒的球威(球威+2)", value: "2,0,0,0,0" },
                { text: "全力投球(球威+3,制球-1)", value: "3,-1,0,0,0" },
                { text: "圧倒的な制球(制球+2)", value: "0,2,0,0,0" },
                { text: "針の穴を通す制球(球威-1,制球+3)", value: "-1,3,0,0,0" },
                { text: "攻めの投球術(球威+1,スタミナ+1)", value: "1,0,1,0,0" },
                { text: "粘りの投球(制球+1,スタミナ+1)", value: "0,1,1,0,0" },
                { text: "好投手(球威+1,制球+1)", value: "1,1,0,0,0" },
                { text: "反骨精神(球威+2,制球-1,スピ+10)", value: "2,-1,0,10,1" },
                { text: "球威自慢(球威+1)", value: "1,0,0,0,0" },
                { text: "喧嘩投法(球威+2,制球-1)", value: "2,-1,0,0,0" },
                { text: "制球自慢(制球+1)", value: "0,1,0,0,0" },
                { text: "丁寧な投球(球威-1,制球+2)", value: "-1,2,0,0,0" }
            ]
        };



        document.getElementById("usage-toggle").addEventListener("click", function () {
            const content = document.getElementById("usage-content");
            if (content.style.display === "none") {
                content.style.display = "block";
                this.textContent = "使い方を閉じる";
            } else {
                content.style.display = "none";
                this.textContent = "使い方を表示";
            }
        });

        document.addEventListener("DOMContentLoaded", () => {
            document.querySelectorAll(".toggle-tokushu").forEach(button => {
                button.addEventListener("click", () => {
                    const wrapper = button.closest("tr").querySelector(".tokushu-wrapper");
                    if (wrapper) {
                        const isOpen = wrapper.style.display === "block";
                        wrapper.style.display = isOpen ? "none" : "block";
                        button.textContent = isOpen ? "Edit" : "Close";
                    }
                });
            });
        });
        function updatePlayerOptions(playerSelect, position, typeFilter) {
            playerSelect.innerHTML = `<option value="">${typeFilter === "野手" ? "野手" : "投手"}を選択</option>`;
            Object.keys(playerData).forEach(playerName => {
                const player = playerData[playerName];
                if (player && player.type === typeFilter && player.mainPosition && typeof player.mainPosition.name === "string") {
                    if (typeFilter === "野手") {
                        // 野手の場合
                        const matchesMainPosition = position === "" || player.mainPosition.name === position;
                        const matchesSubPosition = player.subPositions && player.subPositions.some(sub => sub.name === position);
                        if (matchesMainPosition || matchesSubPosition || position === "指名打者") {
                            const option = document.createElement("option");
                            option.value = playerName;
                            option.textContent = `${playerName} (${player.type})`;
                            playerSelect.appendChild(option);
                        }
                    } else if (typeFilter === "投手") {
                        // 投手の場合
                        const matchesMainPosition = player.mainPosition.name === position;
                        const matchesSubPosition = player.subPositions && player.subPositions.some(sub => sub.name === position);
                        // ベンチの場合は全投手を表示
                        if (position === "ベ" || matchesMainPosition || matchesSubPosition) {
                            const option = document.createElement("option");
                            option.value = playerName;
                            option.textContent = `${playerName} (${player.type})`;
                            playerSelect.appendChild(option);
                        }
                    }
                }
            });
        }
        function updatePlayerStats(index, playerName, tableSelector) {
            const rows = document.querySelectorAll(`${tableSelector} tbody tr`);
            const row = rows[index];
            if (!row) return console.error("指定されたインデックスの行が見つかりません", index, tableSelector);
            const player = playerData[playerName];

            if (!player || !playerName) {
                resetRow(row);
                return;
            }

            const playerSelect = row.querySelector(".player");
            if (!playerSelect) return console.error("playerSelectが見つかりません:", row.outerHTML);
            playerSelect.value = playerName;

            row.cells[3].textContent = player.stat1 || 0; // 球威
            row.cells[4].textContent = player.stat2 || 0; // 制球
            row.cells[5].textContent = player.stat3 || 0; // スタミナ

            if (player.type === "野手") {
                const hasSubPosition = player.subPositions && player.subPositions.length > 0;
                const tokushuInputs = row.querySelectorAll(".tokushu-input");
                if (tokushuInputs.length === 5) {
                    const isFirstLoad = !tokushuInputs[0].dataset.initialized;
                    if (isFirstLoad) {
                        const baseBoost = hasSubPosition ? [2, 2, 2, 2, 1] : [2, 2, 2, 2, 0];
                        tokushuInputs.forEach((input, i) => {
                            input.value = baseBoost[i];
                            input.dataset.initialized = "true";
                        });
                    }
                    let userBoost = Array.from(tokushuInputs).map(input => parseInt(input.value) || 0);
                    let boostSum = userBoost.reduce((acc, val) => acc + val, 0);
                    let newSpirits = boostSum <= 7 ? (player.spirits || 0) + boostSum :
                        hasSubPosition ? (player.spirits || 0) + (boostSum === 8 ? 8 : 10) :
                            (player.spirits || 0) + boostSum + 2;
                    row.cells[7].textContent = newSpirits; // スピリッツ
                }
            } else if (player.type === "投手") {
                row.cells[7].textContent = player.spirits || 0; // 投手のスピリッツ
                const bPitchCell = row.querySelector(".bPitchCount"); // B球種のセルを取得
                if (bPitchCell) {
                    bPitchCell.textContent = player.bPitchCount || 0; // B球種を表示
                }
            }

            const titleSelect = row.querySelector(".title");
            if (titleSelect) {
                const currentValue = titleSelect.value;
                titleSelect.innerHTML = "";
                const titleList = titles[player.type] || titles["野手"];
                titleList.forEach(title => {
                    const option = document.createElement("option");
                    option.value = title.value;
                    option.textContent = title.text;
                    titleSelect.appendChild(option);
                });
                const isValidValue = titleList.some(title => title.value === currentValue);
                titleSelect.value = isValidValue ? currentValue : "0,0,0,0,0";
                if (titleSelect.value && titleSelect.value !== "0,0,0,0,0") {
                    const titleValue = titleSelect.value.split(",").map(num => parseInt(num) || 0);
                    row.cells[3].textContent = (player.stat1 || 0) + (titleValue[0] || 0);
                    row.cells[4].textContent = (player.stat2 || 0) + (titleValue[1] || 0);
                    row.cells[5].textContent = (player.stat3 || 0) + (titleValue[2] || 0);
                    row.cells[7].textContent = parseInt(row.cells[7].textContent) + (titleValue[3] || 0);
                }
            }

            applyStatColor(row.cells[3], row.cells[3].textContent);
            applyStatColor(row.cells[4], row.cells[4].textContent);
            applyStatColor(row.cells[5], row.cells[5].textContent);

            calculateTotalSpirits();
            updateTypeCount();
        }

        function resetRow(row) {
            const playerSelect = row.querySelector(".player");
            if (playerSelect) playerSelect.value = "";
            row.cells[3].textContent = "";
            row.cells[4].textContent = "";
            row.cells[5].textContent = "";
            row.cells[7].textContent = "0";
            const tokushuInputs = row.querySelectorAll(".tokushu-input");
            tokushuInputs.forEach(input => {
                input.value = "0";
                input.dataset.initialized = "";
            });
            const titleSelect = row.querySelector(".title");
            if (titleSelect) titleSelect.value = "0,0,0,0,0";
        }

        function calculateTotalSpirits() {
            let totalSpirits = Array.from(document.querySelectorAll(".spirits"))
                .reduce((acc, cell) => acc + Number(cell.textContent) || 0, 0);
            document.getElementById("totalSpirits").textContent = totalSpirits;
        }

        function updateTypeCount() {
            let hitterTypes = { "ミート型": 0, "パワー型": 0, "走力型": 0 };
            let pitcherTypes = { "球威型": 0, "制球型": 0, "スタミナ型": 0 };

            document.querySelectorAll("tbody tr").forEach(row => {
                let selectPlayer = row.querySelector(".player");
                if (!selectPlayer) return;
                let selectedPlayer = selectPlayer.value;
                let selectedTitle = row.querySelector(".title")?.value.split(",").map(Number) || [0, 0, 0];

                if (playerData[selectedPlayer]) {
                    let type = playerData[selectedPlayer].type;
                    let stat1 = playerData[selectedPlayer].stat1 + (selectedTitle[0] || 0);
                    let stat2 = playerData[selectedPlayer].stat2 + (selectedTitle[1] || 0);
                    let stat3 = playerData[selectedPlayer].stat3 + (selectedTitle[2] || 0);

                    let maxStat = Math.max(stat1, stat2, stat3);
                    if (type === "野手") {
                        if (stat1 === maxStat) hitterTypes["ミート型"]++;
                        if (stat2 === maxStat) hitterTypes["パワー型"]++;
                        if (stat3 === maxStat) hitterTypes["走力型"]++;
                    } else if (type === "投手") {
                        if (stat1 === maxStat) pitcherTypes["球威型"]++;
                        if (stat2 === maxStat) pitcherTypes["制球型"]++;
                        if (stat3 === maxStat) pitcherTypes["スタミナ型"]++;
                    }
                }
            });

            document.getElementById("hitterStats").textContent =
                `ミート型: ${hitterTypes["ミート型"]}人, パワー型: ${hitterTypes["パワー型"]}人, 走力型: ${hitterTypes["走力型"]}人`;
            document.getElementById("pitcherStats").textContent =
                `球威型: ${pitcherTypes["球威型"]}人, 制球型: ${pitcherTypes["制球型"]}人, スタミナ型: ${pitcherTypes["スタミナ型"]}人`;
        }

        // 称号ボーナスを適用する関数（UIと連動）
        function applyTitleBonusToRow(row) {
            const playerSelect = row.querySelector(".player");
            const titleSelect = row.querySelector(".title");
            const playerName = playerSelect?.value;
            const player = playerData[playerName];

            if (!player || !titleSelect) return;

            const titleValue = titleSelect.value.split(",").map(num => parseInt(num) || 0);
            const stat1 = (player.stat1 || 0) + (titleValue[0] || 0);
            const stat2 = (player.stat2 || 0) + (titleValue[1] || 0);
            const stat3 = (player.stat3 || 0) + (titleValue[2] || 0);
            const spiritsBonus = titleValue[3] || 0;

            row.cells[3].textContent = stat1;
            row.cells[4].textContent = stat2;
            row.cells[5].textContent = stat3;

            if (player.type === "野手") {
                const tokushuInputs = row.querySelectorAll(".tokushu-input");
                const hasSubPosition = player.subPositions && player.subPositions.length > 0;
                let userBoost = Array.from(tokushuInputs).map(input => parseInt(input.value) || 0);
                let boostSum = userBoost.reduce((acc, val) => acc + val, 0);
                let newSpirits = boostSum <= 7 ? (player.spirits || 0) + boostSum :
                    hasSubPosition ? (player.spirits || 0) + (boostSum === 8 ? 8 : 10) :
                        (player.spirits || 0) + boostSum + 2;
                row.cells[7].textContent = newSpirits + spiritsBonus;
            } else {
                row.cells[7].textContent = (player.spirits || 0) + spiritsBonus;
            }

            applyStatColor(row.cells[3], stat1);
            applyStatColor(row.cells[4], stat2);
            applyStatColor(row.cells[5], stat3);
        }

        function applyStatColor(statElement, value) {
            statElement.textContent = value;
            statElement.classList.remove("yellow", "orange", "red", "fuchsia");
            if (value >= 50 && value <= 59) statElement.classList.add("yellow");
            else if (value >= 60 && value <= 69) statElement.classList.add("orange");
            else if (value >= 70 && value <= 79) statElement.classList.add("red");
            else if (value >= 80 && value <= 89) statElement.classList.add("fuchsia");
        }

        function updateSelectableOptions() {
            let selectedNames = new Set();

            document.querySelectorAll(".player").forEach(select => {
                let value = select.value;
                if (value) {
                    let baseName = value.replace(/^(侍|TS|B9|アニバ|EX|セレ|S1|S2|覚醒)/, "");
                    selectedNames.add(baseName);
                }
            });

            document.querySelectorAll(".player").forEach(select => {
                let isDH = select.closest("tr").querySelector(".position")?.value === "指名打者";
                let isPitcherRow = select.closest("table").id === "pitchers-table";
                Array.from(select.options).forEach(option => {
                    let baseName = option.value.replace(/^(侍|TS|B9|アニバ|EX|セレ|S1|S2|覚醒)/, "");
                    let isAlreadySelected = selectedNames.has(baseName) && option.value !== select.value;
                    let isPitcher = playerData[option.value] && playerData[option.value].type === "投手";

                    if (isDH) {
                        option.disabled = isPitcher || isAlreadySelected;
                    } else if (isPitcherRow) {
                        option.disabled = !isPitcher || isAlreadySelected;
                    } else {
                        option.disabled = isAlreadySelected;
                    }
                });
            });

            let selectedPositions = new Set();
            document.querySelectorAll(".position").forEach(select => {
                let value = select.value;
                if (value) selectedPositions.add(value);
            });

            document.querySelectorAll(".position").forEach(select => {
                Array.from(select.options).forEach(option => {
                    if (selectedPositions.has(option.value) && option.value !== select.value && option.value !== "") {
                        option.disabled = true;
                    } else {
                        option.disabled = false;
                    }
                });
            });
        }



        document.addEventListener("DOMContentLoaded", function () {

            const positionSelects = document.querySelectorAll("#fielders-table .position");
            const fielderSelects = document.querySelectorAll("#fielders-table .player");
            const pitcherSelects = document.querySelectorAll("#pitchers-table .player");


            // 野手リストの初期化
            fielderSelects.forEach((playerSelect, index) => {
                const row = playerSelect.closest("tr");
                const positionSelect = row.querySelector(".position");
                const isDH = positionSelect && positionSelect.value === "指名打者";
                const isBench = row.cells[1].textContent.trim() === "野手（ベンチ）";

                if (isDH || isBench) {
                    updatePlayerOptions(playerSelect, "", "野手");
                } else {
                    const selectedPosition = positionSelect ? positionSelect.value : "";
                    updatePlayerOptions(playerSelect, selectedPosition, "野手");
                }
            });

            // 投手リストの初期化
            pitcherSelects.forEach((playerSelect) => {
                const row = playerSelect.closest("tr");
                const role = row.cells[1].textContent.trim(); // "先", "継", "抑", "ベンチ"
                updatePlayerOptions(playerSelect, role, "投手");
            });

            // ポジション選択（野手）
            positionSelects.forEach((positionSelect, index) => {
                positionSelect.addEventListener("change", function () {
                    const selectedPosition = this.value;
                    const playerSelect = fielderSelects[index];
                    if (selectedPosition === "指名打者") {
                        updatePlayerOptions(playerSelect, "", "野手");
                    } else {
                        updatePlayerOptions(playerSelect, selectedPosition, "野手");
                    }
                    updatePlayerStats(index, playerSelect.value, "#fielders-table");
                    updateSelectableOptions();
                });
            });

            // 野手の選手選択
            fielderSelects.forEach((playerSelect, index) => {
                playerSelect.addEventListener("change", function () {
                    updatePlayerStats(index, this.value, "#fielders-table");
                    updateSelectableOptions();
                });
            });

            // 投手の選手選択
            pitcherSelects.forEach((playerSelect, index) => {
                playerSelect.addEventListener("change", function () {
                    updatePlayerStats(index, this.value, "#pitchers-table");
                    updateSelectableOptions();
                });
            });



            // 特守入力欄の変更（野手のみ）
            document.querySelectorAll("#fielders-table .tokushu-input").forEach(input => {
                input.addEventListener("change", function () {
                    const row = this.closest("tr");
                    const playerSelect = row.querySelector(".player");
                    const rows = document.querySelectorAll("#fielders-table tbody tr");
                    const index = Array.from(rows).indexOf(row);
                    const playerName = playerSelect.value;
                    if (playerName && playerData[playerName]) {
                        updatePlayerStats(index, playerName, "#fielders-table");
                    }
                });
            });

            // 称号選択
            document.querySelectorAll(".title").forEach(select => {
                select.addEventListener("change", () => {
                    let row = select.closest("tr");
                    applyTitleBonus(row);
                    calculateTotalSpirits();
                    updateTypeCount();
                });
            });

            // 初期ステータスの色付け
            document.querySelectorAll(".stat").forEach(stat => {
                let value = Number(stat.textContent);
                applyStatColor(stat, value);
            });

            document.querySelectorAll(".player, .title").forEach(select => {
                select.addEventListener("change", () => {
                    updateTypeCount();
                });
            });

            updateSelectableOptions();

            // 特守欄のボタンイベント
            document.querySelectorAll(".tokushu-input").forEach(input => {
                const minusBtn = input.previousElementSibling;
                const plusBtn = input.nextElementSibling;
                const maxVal = parseInt(input.max); // 2 または 1
                const minVal = parseInt(input.min); // 0

                minusBtn.addEventListener("click", function () {
                    let currentVal = parseInt(input.value) || 0;
                    if (currentVal > minVal) {
                        input.value = currentVal - 1;
                        triggerUpdate(input);
                    }
                });

                plusBtn.addEventListener("click", function () {
                    let currentVal = parseInt(input.value) || 0;
                    if (currentVal < maxVal) {
                        input.value = currentVal + 1;
                        triggerUpdate(input);
                    }
                });
            });

            // 値変更後にスピリッツなどを更新
            function triggerUpdate(input) {
                const row = input.closest("tr");
                const playerSelect = row.querySelector(".player");
                const rows = document.querySelectorAll("#fielders-table tbody tr");
                const index = Array.from(rows).indexOf(row);
                const playerName = playerSelect.value;
                if (playerName && playerData[playerName]) {
                    updatePlayerStats(index, playerName, "#fielders-table");
                }
            }

            // 既存のコードはそのまま
        });





        // コンボ計算関数
        function calculateCombo() {
            comboTotal = 0;
            activatedCombos = [];

            // 選択された選手を取得
            let selectedPlayers = Array.from(document.querySelectorAll(".player"))
                .map(select => select.value)
                .filter(v => v !== "");

            console.log("選択された選手:", selectedPlayers);

            // 誰か一人でも選択されれば無条件コンボ発動
            if (selectedPlayers.length > 0) {
                comboTotal += 2700 + 1260 + 840 + 720 + 450 + 630 + 420 + 350 + 280 + 100 + 150 + 200 + 120;
                activatedCombos.push("極スワローズ魂 (+2700)", "修練の証明 (+1260)", "類まれなる才能の団結 (+840)",
                    "魂の野手陣 (+720)", "スワローズ打線 (+450)", "魂の投手陣 (+630)", "魂のバッテリー (+420)",
                    "スワローズ投手陣 (+350)", "豪華下位打線 (+280)", "息の合ったコンビ (+100)", "息の合ったクリーンナップ (+150)", "息の合った下位打線 (+200)", "適材適所 (+120)");
            }

            // 20人以上で追加コンボ
            if (selectedPlayers.length >= 20) {
                comboTotal += 500;
                activatedCombos.push("勝利への極結束 (+500)");
                comboTotal += 75;
                activatedCombos.push("若手の活躍 (+75)");


            }

            // 型のカウント
            let hitterText = document.getElementById("hitterStats").textContent;
            let pitcherText = document.getElementById("pitcherStats").textContent;

            let hitterMatch = hitterText.match(/ミート型: (\d+)人, パワー型: (\d+)人, 走力型: (\d+)人/);
            let pitcherMatch = pitcherText.match(/球威型: (\d+)人, 制球型: (\d+)人, スタミナ型: (\d+)人/);

            if (hitterMatch && pitcherMatch) {
                let hitterCount = {
                    ミート: parseInt(hitterMatch[1], 10),
                    パワー: parseInt(hitterMatch[2], 10),
                    走力: parseInt(hitterMatch[3], 10)
                };
                let pitcherCount = {
                    球威: parseInt(pitcherMatch[1], 10),
                    制球: parseInt(pitcherMatch[2], 10),
                    スタミナ: parseInt(pitcherMatch[3], 10)
                };

                // 条件付きコンボ（野手）
                if (hitterCount["ミート"] >= 8) { comboTotal += 960; activatedCombos.push("超周到精密 (+960)"); }
                else if (hitterCount["ミート"] >= 6) { comboTotal += 600; activatedCombos.push("周到精密 (+600)"); }

                if (hitterCount["パワー"] >= 8) { comboTotal += 960; activatedCombos.push("超大胆不敵 (+960)"); }
                else if (hitterCount["パワー"] >= 6) { comboTotal += 600; activatedCombos.push("大胆不敵 (+600)"); }

                if (hitterCount["走力"] >= 8) { comboTotal += 960; activatedCombos.push("超疾風迅雷 (+960)"); }
                else if (hitterCount["走力"] >= 6) { comboTotal += 600; activatedCombos.push("疾風迅雷 (+600)"); }

                // 条件付きコンボ（投手）
                if (pitcherCount["球威"] >= 8) { comboTotal += 840; activatedCombos.push("超力戦奮投 (+840)"); }
                else if (pitcherCount["球威"] >= 6) { comboTotal += 480; activatedCombos.push("力戦奮投 (+480)"); }

                if (pitcherCount["制球"] >= 8) { comboTotal += 840; activatedCombos.push("超正確無比 (+840)"); }
                else if (pitcherCount["制球"] >= 6) { comboTotal += 480; activatedCombos.push("正確無比 (+480)"); }

                if (pitcherCount["スタミナ"] >= 8) { comboTotal += 840; activatedCombos.push("超堅忍不抜 (+840)"); }
                else if (pitcherCount["スタミナ"] >= 6) { comboTotal += 480; activatedCombos.push("堅忍不抜 (+480)"); }
            }

            // ステータス80以上の選手をカウント
            let highMeetPlayers = 0, highPowerPlayers = 0, highSpeedPlayers = 0;
            let highBallPowerPlayers = 0, highControlPlayers = 0, highStaminaPlayers = 0;

            selectedPlayers.forEach(player => {
                let playerInfo = playerData[player];
                if (!playerInfo) return;

                let row = Array.from(document.querySelectorAll(".player")).find(select => select.value === player)?.closest("tr");
                if (!row) return;

                const titleSelect = row.querySelector(".title");
                const titleValue = titleSelect?.value.split(",").map(num => parseInt(num) || 0) || [0, 0, 0, 0, 0];

                let totalStat1 = (playerInfo.stat1 || 0) + (titleValue[0] || 0);
                let totalStat2 = (playerInfo.stat2 || 0) + (titleValue[1] || 0);
                let totalStat3 = (playerInfo.stat3 || 0) + (titleValue[2] || 0);

                if (playerInfo.type === "野手") {
                    if (totalStat1 >= 80) highMeetPlayers++;
                    if (totalStat2 >= 80) highPowerPlayers++;
                    if (totalStat3 >= 80) highSpeedPlayers++;
                } else if (playerInfo.type === "投手") {
                    if (totalStat1 >= 80) highBallPowerPlayers++;
                    if (totalStat2 >= 80) highControlPlayers++;
                    if (totalStat3 >= 80) highStaminaPlayers++;
                }
            });

            // ステータス80以上のコンボ
            if (highMeetPlayers >= 8) { comboTotal += 720; activatedCombos.push("超安打製造機 (+720)"); }
            else if (highMeetPlayers >= 4) { comboTotal += 240; activatedCombos.push("安打製造機 (+240)"); }

            if (highPowerPlayers >= 8) { comboTotal += 720; activatedCombos.push("超重量打線 (+720)"); }
            else if (highPowerPlayers >= 4) { comboTotal += 240; activatedCombos.push("重量打線 (+240)"); }

            if (highSpeedPlayers >= 8) { comboTotal += 720; activatedCombos.push("光速ランナーズ (+720)"); }
            else if (highSpeedPlayers >= 4) { comboTotal += 240; activatedCombos.push("音速ランナーズ (+240)"); }

            if (highBallPowerPlayers >= 8) { comboTotal += 720; activatedCombos.push("超豪腕投手陣 (+720)"); }
            else if (highBallPowerPlayers >= 4) { comboTotal += 240; activatedCombos.push("豪腕投手陣 (+240)"); }

            if (highControlPlayers >= 8) { comboTotal += 720; activatedCombos.push("超精密スナイパーズ (+720)"); }
            else if (highControlPlayers >= 4) { comboTotal += 240; activatedCombos.push("精密スナイパーズ (+240)"); }

            if (highStaminaPlayers >= 8) { comboTotal += 720; activatedCombos.push("超鉄腕投手陣 (+720)"); }
            else if (highStaminaPlayers >= 4) { comboTotal += 240; activatedCombos.push("鉄腕投手陣 (+240)"); }

            // ジグザグ打線
            const startingFielders = selectedPlayers
                .map(player => playerData[player])
                .filter(playerInfo => playerInfo && playerInfo.type === "野手")
                .slice(0, 9);

            function checkZigzagLineup(fielders) {
                if (fielders.length < 9) return false;
                for (let i = 0; i < fielders.length - 1; i++) {
                    const current = fielders[i].battingSide;
                    const next = fielders[i + 1].battingSide;
                    if (current !== "両" && next !== "両" && current === next) return false;
                }
                return true;
            }

            if (selectedPlayers.length > 0 && checkZigzagLineup(startingFielders)) {
                comboTotal += 450;
                activatedCombos.push("ジグザグ打線 (+450)");
            }

            // 特定選手コンボ

            if (selectedPlayers.includes("アニバサンタナ") || selectedPlayers.includes("アニバ山田哲人")) {
                comboTotal += 630;
                activatedCombos.push("オートグラフ (+630)");
            }
            if (selectedPlayers.includes("EX村上宗隆") || selectedPlayers.includes("EX大西広樹")) {
                comboTotal += 630;
                activatedCombos.push("熱狂の渦 (+630)");
            }
            // 一人選択で発動するコンボ
            if (selectedPlayers.includes("すぽると！山野太一")) {
                comboTotal += 630;
                activatedCombos.push("すぽると！ (+630)");
            }
            if (selectedPlayers.includes("アニバ村上宗隆") || selectedPlayers.includes("アニバ山田哲人")) {
                comboTotal += 630;
                activatedCombos.push("オートグラフ (+630)");
            }





            // 選ばれしき者の輝き
            if (selectedPlayers.includes("セレサンタナ") || selectedPlayers.includes("セレ木澤尚文") || selectedPlayers.includes("セレ小川泰弘")) {
                comboTotal += 600;
                activatedCombos.push("選ばれしき者の輝き (+600)");
                console.log("選ばれしき者の輝き (+600)");
            }

            // B9&TH発動
            if (selectedPlayers.includes("B9サンタナ") || selectedPlayers.includes("B9村上宗隆") || selectedPlayers.includes("B9長岡秀樹")) {
                comboTotal += 200;
                activatedCombos.push("B9&TH (+200)");
                console.log("B9&TH発動 (+200)");
            }

            // 伝説の名選手
            if (selectedPlayers.includes("セレ古田敦也") || selectedPlayers.includes("OB杉浦亨") || selectedPlayers.includes("OB石井一久") || selectedPlayers.includes("OBロマン") || selectedPlayers.includes("OB坂口智隆") || selectedPlayers.includes("WC岩村明憲") || selectedPlayers.includes("OBペタジーニ")) {
                comboTotal += 100;
                activatedCombos.push("伝説の名選手 (+100)");
                console.log("伝説の名選手 (+100)");
            }

            // メジャーの記憶
            if (selectedPlayers.includes("WC岩村明憲")) {
                comboTotal += 200;
                activatedCombos.push("メジャーの記憶 (+200)");
                console.log("メジャーの記憶 (+200)");
            }

            // 勝利のタクト
            if (selectedPlayers.includes("スピリーグ真中満")) {
                comboTotal += 200;
                activatedCombos.push("勝利のタクト (+200)");
                console.log("勝利のタクト (+200)");
            }

            // 時を超えた活躍
            if (selectedPlayers.includes("TS田中浩康") || selectedPlayers.includes("TS山本哲也") || selectedPlayers.includes("TS石川雅規") || selectedPlayers.includes("TS相川亮二") || selectedPlayers.includes("TS塩見泰隆") || selectedPlayers.includes("TS稲葉篤紀") || selectedPlayers.includes("TS福地寿樹") || selectedPlayers.includes("TS土橋勝征") || selectedPlayers.includes("TS吉井理人") || selectedPlayers.includes("TS由規") || selectedPlayers.includes("TS山田哲人") || selectedPlayers.includes("TS山崎晃大朗") || selectedPlayers.includes("TS池山隆寛") || selectedPlayers.includes("TS伊藤智仁") || selectedPlayers.includes("TS高津臣吾") || selectedPlayers.includes("TS川端慎吾") || selectedPlayers.includes("TS小川泰弘") || selectedPlayers.includes("TS石井久寿") || selectedPlayers.includes("TS雄平")) {
                comboTotal += 70;
                activatedCombos.push("時を超えた活躍 (+70)");
                console.log("時を超えた活躍 (+70)");
            }

            // 代表の誇り
            if (selectedPlayers.includes("侍山田哲人") || selectedPlayers.includes("侍中村雄平") || selectedPlayers.includes("侍川端慎吾") || selectedPlayers.includes("侍小川泰弘")) {
                comboTotal += 600;
                activatedCombos.push("代表の誇り (+200)");
                console.log("代表の誇り (+200)");
            }




            //アーチストを持つ選手をフィルタリング**
            const artist = selectedPlayers.filter(player =>
                playerData[player]?.abilities.includes("超アーチ") || playerData[player]?.abilities.includes("アーチ")
            );

            let isartist = false; // 超初球の発動フラグ

            if (artist.length >= 3) { // 3人以上で発動
                comboTotal += 270;
                activatedCombos.push("超アーチストの競演 (+270)");
                console.log("超アーチストの競演 (+270)");
                isartist = true; // フラグを立てる
            }



            //超パワヒを持つ選手をフィルタリング**
            const superpowerhitters = selectedPlayers.filter(player =>
                playerData[player]?.abilities.includes("超パワヒ")
            );

            let issuperpowerhitters = false; // 超初球の発動フラグ

            if (superpowerhitters.length >= 3) { // 3人以上で発動
                comboTotal += 480;
                activatedCombos.push("極パワーヒッターズ (+480)");
                console.log("極パワーヒッターズ (+480)");
                issuperpowerhitters = true; // フラグを立てる
            }

            // **パワヒを持つ選手をフィルタリング**
            const powerhitter = selectedPlayers.filter(player =>
                playerData[player]?.abilities.includes("超パワヒ") || playerData[player]?.abilities.includes("パワヒ")
            );


            if (!issuperpowerhitters && powerhitter.length >= 3) { // 3人以上で発動
                comboTotal += 270;
                activatedCombos.push("超パワーヒッターズ (+270)");
                console.log("超パワーヒッターズ (+270)");
            }

            // **超広角打法を持つ選手をフィルタリング**
            const wideanglebatting = selectedPlayers.filter(player =>
                playerData[player]?.abilities.includes("超広角")
            );

            let isSuperSprayHittersActivated = false; // 超スプレーヒッターズの発動フラグ

            if (wideanglebatting.length >= 3) {  // 3人以上で発動
                comboTotal += 480;
                activatedCombos.push("極スプレーヒッターズ (+480)");
                console.log("極スプレーヒッターズ (+480)");
                isSuperSprayHittersActivated = true; // フラグを立てる
            }


            // **広角打法を持つ選手をフィルタリング**
            const wideangle = selectedPlayers.filter(player =>
                playerData[player]?.abilities.includes("超広角") || playerData[player]?.abilities.includes("広角")
            );

            // 超スプレーヒッターズが発動していない場合のみ 極スプレーヒッターズ を発動
            if (!isSuperSprayHittersActivated && wideangle.length >= 3) {  // 3人以上で発動
                comboTotal += 270;
                activatedCombos.push("超スプレーヒッターズ (+270)");
                console.log("超スプレーヒッターズ (+270)");
            }

            // **超選球眼を持つ選手をフィルタリング**
            const ballselectioneyes = selectedPlayers.filter(player =>
                playerData[player]?.abilities.includes("超選球眼")
            );

            let isSuperSmokedbaseballs = false; // 超スモークベースボールの発動フラグ

            if (ballselectioneyes.length >= 3) {  // 3人以上で発動
                comboTotal += 480;
                activatedCombos.push("極スモークベースボール (+480)");
                console.log("極スモークベースボール (+480)");
                isSuperSmokedbaseballs = true; // フラグを立てる
            }

            // **選球眼を持つ選手をフィルタリング**
            const ballselectioneye = selectedPlayers.filter(player =>
                playerData[player]?.abilities.includes("超選球眼") || playerData[player]?.abilities.includes("選球眼")
            );

            if (!isSuperSmokedbaseballs && ballselectioneye.length >= 3) {  // 3人以上で発動
                comboTotal += 270;
                activatedCombos.push("超スモークベースボール (+270)");
                console.log("超スモークベースボール (+270)");
            }


            // **超流し打ち、超粘りうちを持つ選手をフィルタリング**
            const outsidecornerhitters = selectedPlayers.filter(player =>
                playerData[player]?.abilities.includes("超粘りうち") || playerData[player]?.abilities.includes("超流し打ち")
            );

            let isMasterBlowActivated = false; // 極匠の打撃の発動フラグ

            if (outsidecornerhitters.length >= 3) {  // 3人以上で発動
                comboTotal += 480;
                activatedCombos.push("極匠の打撃 (+480)");
                console.log("極匠の打撃 (+480)");
                isMasterBlowActivated = true; // フラグを立てる
            }

            // **粘りうち、選球眼、いぶし銀を持つ選手をフィルタリング**
            const outsidecornerhitter = selectedPlayers.filter(player =>
                playerData[player]?.abilities.includes("流し打ち") ||
                playerData[player]?.abilities.includes("超流し打ち") ||
                playerData[player]?.abilities.includes("粘りうち") ||
                playerData[player]?.abilities.includes("超粘りうち") ||
                playerData[player]?.abilities.includes("いぶし銀")
            );

            // 極匠の打撃が発動していない場合のみ 超匠の打撃 を発動
            if (!isMasterBlowActivated && outsidecornerhitter.length >= 3) {  // 3人以上で発動
                comboTotal += 270;
                activatedCombos.push("超匠の打撃 (+270)");
                console.log("超匠の打撃 (+270)");
            }

            // **超チャンメを持つ選手をフィルタリング**
            const chancemakers = selectedPlayers.filter(player =>
                playerData[player]?.abilities.includes("超チャンメ")
            );

            let isSupertablesetters = false; // 超テーブルセッターズの発動フラグ

            if (chancemakers.length >= 3) {  // 3人以上で発動
                comboTotal += 480;
                activatedCombos.push("極テーブルセッターズ (+480)");
                console.log("極テーブルセッターズ (+480)");
                isSupertablesetters = true; // フラグを立てる
            }

            // **チャンメを持つ選手をフィルタリング**
            const chancemaker = selectedPlayers.filter(player =>
                playerData[player]?.abilities.includes("超チャンメ") || playerData[player]?.abilities.includes("チャンメ")
            );


            if (!isSupertablesetters && chancemaker.length >= 3) {  // 3人以上で発動
                comboTotal += 270;
                activatedCombos.push("超テーブルセッターズ (+270)");
                console.log("超テーブルセッターズ(+270)");
            }


            // **超チャンスを持つ選手をフィルタリング**
            const chances = selectedPlayers.filter(player =>
                playerData[player]?.abilities.includes("超チャンス")
            );

            let isSuperchancetimes = false; // 超チャンスタイムの発動フラグ

            if (chances.length >= 3) {  // 3人以上で発動
                comboTotal += 480;
                activatedCombos.push("極チャンスタイム (+480)");
                console.log("極チャンスタイム (+480)");
                isSuperchancetimes = true; // フラグを立てる
            }

            // **チャンスを持つ選手をフィルタリング**
            const chance = selectedPlayers.filter(player =>
                playerData[player]?.abilities.includes("超チャンス") || playerData[player]?.abilities.includes("チャンス")
            );


            if (!isSuperchancetimes && chance.length >= 3) {  // 3人以上で発動
                comboTotal += 270;
                activatedCombos.push("超チャンスタイム (+270)");
                console.log("超チャンスタイム(+270)");
            }

            // **超ラインドライブを持つ選手をフィルタリング**
            const superlineDriveHitters = selectedPlayers.filter(player =>
                playerData[player]?.abilities.includes("超ライドラ")
            );

            let isSuperlineDriveHitters = false; // 超ライドラの発動フラグ

            if (superlineDriveHitters.length >= 3) {  // 3人以上で発動
                comboTotal += 480;
                activatedCombos.push("極弾丸ライナーズ (+480)");
                console.log("極弾丸ライナーズ (+480)");
                isSuperlineDriveHitters = true; // フラグを立てる
            }

            // **ライドラを持つ選手をフィルタリング**
            const lineDriveHitter = selectedPlayers.filter(player =>
                playerData[player]?.abilities.includes("超ライドラ") || playerData[player]?.abilities.includes("ライドラ")
            );


            if (!isSuperlineDriveHitters && lineDriveHitter.length >= 3) {  // 3人以上で発動
                comboTotal += 270;
                activatedCombos.push("超弾丸ライナーズ (+270)");
                console.log("超弾丸ライナーズ(+270)");
            }

            // **代打、超代打を持つ選手をフィルタリング**
            const pinchhitter = selectedPlayers.filter(player =>
                playerData[player]?.abilities.includes("代打") ||
                playerData[player]?.abilities.includes("超代打の神様")
            );

            if (pinchhitter.length >= 3) {  // 3人以上で発動
                comboTotal += 270;
                activatedCombos.push("超代打攻勢 (+270)");
                console.log("超代打攻勢 (+270)");
            }

            // **超捕手のみを持つ選手をフィルタリング**
            const defenses = selectedPlayers.filter(player =>
                playerData[player]?.abilities.includes("超捕手")
            );

            let isdefenses = false; // 超ライドラの発動フラグ

            if (defenses.length >= 3) {  // 3人以上で発動
                comboTotal += 480;
                activatedCombos.push("極職人の妙技 (+480)");
                console.log("極職人の妙技 (+480)");
            }
            isdefenses = true; // フラグを立てる


            // **超捕手、捕手、守備職人を持つ選手をフィルタリング**
            const defense = selectedPlayers.filter(player =>
                playerData[player]?.abilities.includes("超捕手") || playerData[player]?.abilities.includes("捕手")
            );
            if (!isdefenses && defense.length >= 3) {  // 3人以上で発動
                comboTotal += 270;
                activatedCombos.push("超職人の妙技 (+270)");
                console.log("超職人の妙技 (+270)");
            }




            //超走塁、超盗塁を持つ選手をフィルタリング**
            const superspeeds = selectedPlayers.filter(player =>
                playerData[player]?.abilities.includes("超走塁") || playerData[player]?.abilities.includes("超盗塁")
            );

            let issuperspeeds = false; // 超走塁、超盗塁の発動フラグ

            if (superspeeds.length >= 2) { // 3人以上で発動
                comboTotal += 480;
                activatedCombos.push("極機動力野球 +480");
                console.log("極機動力野球 +480");
                issuperspeeds = true; // フラグを立てる
            }

            // **走塁を持つ選手をフィルタリング**
            const speed = selectedPlayers.filter(player =>
                playerData[player]?.abilities.includes("走塁") ||
                playerData[player]?.abilities.includes("超走塁") ||
                playerData[player]?.abilities.includes("盗塁") ||
                playerData[player]?.abilities.includes("超盗塁") ||
                playerData[player]?.abilities.includes("内野安打")
            );


            if (!issuperspeeds && speed.length >= 2) { // 3人以上で発動
                comboTotal += 270;
                activatedCombos.push("超機動力野球 (+270)");
                console.log("超機動力野球 (+270)");
            }








            //超初球を持つ選手をフィルタリング**
            const firstpitchs = selectedPlayers.filter(player =>
                playerData[player]?.abilities.includes("超初球")
            );

            let isSuperfirstpitchs = false; // 超初球の発動フラグ

            if (firstpitchs.length >= 3) {  // 3人以上で発動
                comboTotal += 480;
                activatedCombos.push("極積極果敢な攻め (+480)");
                console.log("極積極果敢な攻め (+480)");
                isSuperfirstpitchs = true; // フラグを立てる
            }

            // **初球を持つ選手をフィルタリング**
            const firstpitch = selectedPlayers.filter(player =>
                playerData[player]?.abilities.includes("超初球") || playerData[player]?.abilities.includes("初球")
            );


            if (!isSuperfirstpitchs && firstpitch.length >= 3) {  // 3人以上で発動
                comboTotal += 270;
                activatedCombos.push("超積極果敢な攻め (+270)");
                console.log("超積極果敢な攻め(+270)");
            }

            //超アベレージヒッターを持つ選手をフィルタリング**
            const superavergehitters = selectedPlayers.filter(player =>
                playerData[player]?.abilities.includes("超初球")
            );

            let issuperavergehitters = false; // 超アベレージヒッターズの発動フラグ

            if (superavergehitters.length >= 3) { // 3人以上で発動
                comboTotal += 480;
                activatedCombos.push("極アベレージヒッター (+480)");
                console.log("極アベレージヒッター (+480)");
                issuperavergehitters = true; // フラグを立てる
            }

            // **アベレージヒッターを持つ選手をフィルタリング**
            const avergehitter = selectedPlayers.filter(player =>
                playerData[player]?.abilities.includes("超アベレージヒッター") || playerData[player]?.abilities.includes("アベレージヒッター")
            );


            if (!issuperavergehitters && avergehitter.length >= 3) { // 3人以上で発動
                comboTotal += 270;
                activatedCombos.push("超アベレージヒッター (+270)");
                console.log("超アベレージヒッター(+270)");
            }


            // **連発、固め打ち、連打を持つ選手をフィルタリング**
            const katameuti = selectedPlayers.filter(player =>
                playerData[player]?.abilities.includes("連発") ||
                playerData[player]?.abilities.includes("固め打ち") ||
                playerData[player]?.abilities.includes("連打")
            );

            if (katameuti.length >= 3) {  // 3人以上で発動
                comboTotal += 270;
                activatedCombos.push("超スターマイン (+270)");
                console.log("超スターマイン (+270)");
            }


            //投手の特殊能力
            // 超豪速球/超重い球/超ノビ を持つ選手をフィルタリング
            const fasttballs = selectedPlayers.filter(player =>
                playerData[player]?.abilities.includes("超豪速球") ||
                playerData[player]?.abilities.includes("超重い球") ||
                playerData[player]?.abilities.includes("超ノビ")
            );

            let isSuperfasttballs = false; // 超初球の発動フラグ

            if (fasttballs.length >= 3) { // 3人以上で発動
                comboTotal += 480;
                activatedCombos.push("極直球勝負 (+480)");
                console.log("極直球勝負 (+480)");
                isSuperfasttballs = true; // フラグを立てる
            }

            // 豪速球/超豪速球/重い球/超重い球/ノビ/超ノビ を持つ選手をフィルタリング
            const fastball = selectedPlayers.filter(player =>
                playerData[player]?.abilities.includes("超豪速球") ||
                playerData[player]?.abilities.includes("豪速球") ||
                playerData[player]?.abilities.includes("超重い球") ||
                playerData[player]?.abilities.includes("重い球") ||
                playerData[player]?.abilities.includes("超ノビ") ||
                playerData[player]?.abilities.includes("ノビ")
            );

            if (!isSuperfasttballs && fastball.length >= 3) { // 3人以上で発動
                comboTotal += 270;
                activatedCombos.push("超直球勝負 (+270)");
                console.log("超直球勝負 (+270)");
            }


            // **超対ピンチを持つ選手をフィルタリング**
            const superAgainstpinch = selectedPlayers.filter(player =>
                playerData[player]?.abilities.includes("超対ピンチ")
            );

            let issuperAgainstpinchs = false; // 超対ピンチの発動フラグ

            if (superAgainstpinch.length >= 3) { // 3人以上で発動
                comboTotal += 480;
                activatedCombos.push("極一球入魂 (+480)");
                console.log("極一球入魂 (+480)");
                issuperAgainstpinchs = true; // フラグを立てる
            }

            // **超対ピンチ、対ピンチ、対ランナーを持つ選手をフィルタリング**
            const Againstpinch = selectedPlayers.filter(player =>
                playerData[player]?.abilities.includes("超対ピンチ") ||
                playerData[player]?.abilities.includes("対ピンチ") ||
                playerData[player]?.abilities.includes("対ランナー")
            );

            if (!issuperAgainstpinchs && Againstpinch.length >= 3) { // 3人以上で発動
                comboTotal += 270;
                activatedCombos.push("超一球入魂 (+270)");
                console.log("超一球入魂 (+270)");
            }


            //超キレを持つ選手をフィルタリング**
            const supersharps = selectedPlayers.filter(player =>
                playerData[player]?.abilities.includes("超キレ")
            );

            let issupersharps = false; // 超キレの発動フラグ

            if (supersharps.length >= 3) { // 3人以上で発動
                comboTotal += 480;
                activatedCombos.push("極変化球勝負 (+480)");
                console.log("極変化球勝負 (+480)");
                issupersharps = true; // フラグを立てる
            }

            // **キレを持つ選手をフィルタリング**
            const sharp = selectedPlayers.filter(player =>
                playerData[player]?.abilities.includes("超キレ") || playerData[player]?.abilities.includes("キレ")
            );


            if (!issupersharps && sharp.length >= 3) { // 3人以上で発動
                comboTotal += 270;
                activatedCombos.push("超変化球勝負 (+270)");
                console.log("超変化球勝負(+270)");
            }


            //超奪三振、超奪三振ショーを持つ選手をフィルタリング**
            const superstricks = selectedPlayers.filter(player =>
                playerData[player]?.abilities.includes("超奪三振ショー") || playerData[player]?.abilities.includes("超奪三振")
            );

            let issuperstricks = false; // 超初球の発動フラグ

            if (superstricks.length >= 3) { // 3人以上で発動
                comboTotal += 480;
                activatedCombos.push("極ドクターK (+480)");
                console.log("極ドクターK (+480)");
                issuperAgainstpinchs = true; // フラグを立てる
            }

            // **超奪三振、超奪三振ショー、奪三振を持つ選手をフィルタリング**
            const superstrick = selectedPlayers.filter(player =>
                playerData[player]?.abilities.includes("奪三振ショー") || playerData[player]?.abilities.includes("奪三振") || playerData[player]?.abilities.includes("超奪三振ショー") || playerData[player]?.abilities.includes("超奪三振")
            );


            if (!issuperstricks && superstrick.length >= 3) { // 3人以上で発動
                comboTotal += 270;
                activatedCombos.push("超ドクターK (+270)");
                console.log("超ドクターK (+270)");
            }

            //超コントロールを持つ選手をフィルタリング**
            const supercontrols = selectedPlayers.filter(player =>
                playerData[player]?.abilities.includes("超コントロール")
            );

            let issupercontrols = false; // 超コントロールの発動フラグ

            if (supercontrols.length >= 3) { // 3人以上で発動
                comboTotal += 480;
                activatedCombos.push("極コントロール勝負 (+480)");
                console.log("極コントロール勝負 (+480)");
                issupercontrols = true; // フラグを立てる
            }

            // **超コントロール、コントロール、内角、外角を持つ選手をフィルタリング**
            const supercontrol = selectedPlayers.filter(player =>
                playerData[player]?.abilities.includes("超コントロール") || playerData[player]?.abilities.includes("コントロール") || playerData[player]?.abilities.includes("内角") || playerData[player]?.abilities.includes("外角")
            );


            if (!issupercontrols && supercontrol.length >= 3) { // 3人以上で発動
                comboTotal += 270;
                activatedCombos.push("超コントロール勝負 (+270)");
                console.log("超コントロール勝負(+270)");
            }

            //超打たれ強さを持つ選手をフィルタリング**
            const superstrengthtohits = selectedPlayers.filter(player =>
                playerData[player]?.abilities.includes("超打たれ強さ")
            );

            let issuperstrengthtohits = false; // 超打たれ強さの発動フラグ

            if (superstrengthtohits.length >= 3) { // 3人以上で発動
                comboTotal += 480;
                activatedCombos.push("極不屈の精神 (+480)");
                console.log("極不屈の精神 (+480)");
                issuperstrengthtohits = true; // フラグを立てる
            }

            // **打たれ強さを持つ選手をフィルタリング**
            const strengthtohit = selectedPlayers.filter(player =>
                playerData[player]?.abilities.includes("超打たれ強さ") || playerData[player]?.abilities.includes("打たれ強さ")
            );


            if (!issuperstrengthtohits && strengthtohit.length >= 3) { // 3人以上で発動
                comboTotal += 270;
                activatedCombos.push("超不屈の精神 (+270)");
                console.log("超不屈の精神(+270)");
            }

            //超右打者を持つ選手をフィルタリング**
            const superrighthitters = selectedPlayers.filter(player =>
                playerData[player]?.abilities.includes("超対右打者")
            );

            let issuperrighthitters = false; // 超対右打者の発動フラグ

            if (superrighthitters.length >= 3) { // 3人以上で発動
                comboTotal += 480;
                activatedCombos.push("極右キラーズ (+480)");
                console.log("極右キラーズ (+480)");
                issuperrighthitters = true; // フラグを立てる
            }

            // **対右打者を持つ選手をフィルタリング**
            const righthitter = selectedPlayers.filter(player =>
                playerData[player]?.abilities.includes("超対右打者") || playerData[player]?.abilities.includes("対右打者")
            );


            if (!issuperrighthitters && righthitter.length >= 3) { // 3人以上で発動
                comboTotal += 270;
                activatedCombos.push("超右キラーズ (+270)");
                console.log("超右キラーズ (+270)");
            }

            // **奥行き、緩急を持つ選手をフィルタリング**
            const slowandfast = selectedPlayers.filter(player =>
                playerData[player]?.abilities.includes("奥行き") ||
                playerData[player]?.abilities.includes("超奥行き") ||
                playerData[player]?.abilities.includes("緩急")
            );

            if (slowandfast.length >= 3) {  // 3人以上で発動
                comboTotal += 270;
                activatedCombos.push("超緩急自在 (+270)");
                console.log("超緩急自在(+270)");
            }






            // **選択された投手の B以上の球種の数を合計**
            let bPitchCount = selectedPlayers.reduce((count, player) => {
                if (playerData[player]?.type === "投手") {
                    return count + Number(playerData[player]?.bPitchCount || 0);
                }
                return count;
            }, 0);


            console.log("B以上の球種の合計:", bPitchCount);

            let isSuperHengenJizai = false; // 超変幻自在の発動フラグ

            // **b球種の数が15個以上なら "超変幻自在 +840" を発動**
            if (bPitchCount >= 15) {
                comboTotal += 840;
                activatedCombos.push("超変幻自在 (+840)");
                console.log("超変幻自在 (+840)");
                isSuperHengenJizai = true; // フラグを立てる
            }

            // **超変幻自在が発動しなかった場合、b球種が10個以上なら "変幻自在 +630" を発動**
            if (!isSuperHengenJizai && bPitchCount >= 10) {
                comboTotal += 630;
                activatedCombos.push("変幻自在 (+630)");
                console.log("変幻自在 (+630)");
            }
            // **投手が11人なら "レインボー投手陣 +420" を発動**
            let pitcherCount = selectedPlayers.filter(player => playerData[player]?.type === "投手").length;

            if (pitcherCount === 11) {
                comboTotal += 420;
                activatedCombos.push("レインボー投手陣 (+420)");
                console.log("レインボー投手陣 (+420) 発動");
            }


            // コンボ判定用の変数
            const centerLinePositions = ["中堅手", "二塁手", "遊撃手", "捕手"];
            const doublePlayPositions = ["二塁手", "遊撃手"]; // 二遊間
            const outfieldPositions = ["左翼手", "中堅手", "右翼手"]; // 外野陣
            let centerLinePlayers = {};
            let doublePlayPlayers = {};
            let outfieldPlayers = {};

            document.querySelectorAll("#fielders-table tbody tr").forEach(row => {
                const positionSelect = row.querySelector(".position");
                const playerSelect = row.querySelector(".player");
                const position = positionSelect?.value;
                const playerName = playerSelect?.value;

                if (position && playerName) {
                    const player = playerData[playerName];
                    if (player && player.mainPosition) {
                        let baseAptitude = player.mainPosition.適性 || 0;
                        let aptitudeBonus = 0;

                        // 特守ボーナスを計算
                        const tokushuInputs = row.querySelectorAll(".tokushu-input");
                        if (tokushuInputs.length === 5) {
                            const boostValues = Array.from(tokushuInputs).map(input => parseInt(input.value) || 0);
                            aptitudeBonus = boostValues[0]; // メイン適正に適用される特守値を最初の入力値とする
                        }

                        const totalAptitude = baseAptitude + aptitudeBonus;

                        // ポジションごとに適正を記録
                        if (centerLinePositions.includes(position)) {
                            centerLinePlayers[position] = totalAptitude;
                        }
                        if (doublePlayPositions.includes(position)) {
                            doublePlayPlayers[position] = totalAptitude;
                        }
                        if (outfieldPositions.includes(position)) {
                            outfieldPlayers[position] = totalAptitude;
                        }
                    }
                }
            });

            // 鉄壁センターライン (+350) の判定
            const hasIronWallCenter = centerLinePositions.every(pos => centerLinePlayers[pos] && centerLinePlayers[pos] > 70);
            if (hasIronWallCenter) {
                comboTotal += 350;
                activatedCombos.push("鉄壁センターライン (+350)");
            }

            // 堅守センターライン (+240) の判定（鉄壁が発動していない場合）
            const hasSolidCenter = centerLinePositions.every(pos => centerLinePlayers[pos] && centerLinePlayers[pos] >= 60);
            if (!hasIronWallCenter && hasSolidCenter) {
                comboTotal += 240;
                activatedCombos.push("堅守センターライン (+240)");
            }

            // 鉄壁二遊間 (+180) の判定
            const hasIronWallDoublePlay = doublePlayPositions.every(pos => doublePlayPlayers[pos] && doublePlayPlayers[pos] > 70);
            if (hasIronWallDoublePlay) {
                comboTotal += 180;
                activatedCombos.push("鉄壁二遊間 (+180)");
            }

            // 堅守二遊間 (+120) の判定（鉄壁が発動していない場合）
            const hasSolidDoublePlay = doublePlayPositions.every(pos => doublePlayPlayers[pos] && doublePlayPlayers[pos] >= 60);
            if (!hasIronWallDoublePlay && hasSolidDoublePlay) {
                comboTotal += 120;
                activatedCombos.push("堅守二遊間 (+120)");
            }

            // 堅守外野陣 (+180) の判定
            const hasSolidOutfield = outfieldPositions.every(pos => outfieldPlayers[pos] && outfieldPlayers[pos] >= 60);
            if (hasSolidOutfield) {
                comboTotal += 180;
                activatedCombos.push("堅守外野陣 (+180)");
            }

            // 堅実な外野陣 (+120) の判定（堅守が発動していない場合）
            const hasSteadyOutfield = outfieldPositions.every(pos => outfieldPlayers[pos] && outfieldPlayers[pos] >= 50);
            if (!hasSolidOutfield && hasSteadyOutfield) {
                comboTotal += 120;
                activatedCombos.push("堅実な外野陣 (+120)");
            }

            // 表示更新
            updateDisplay();
        }



        // 称号適用関数（サンプル）
        function applyTitleBonus(playerData, title) {
            if (!playerData || !playerData.type) return playerData;

            const hitterTypes = ["ミート", "パワー", "走力"];
            const pitcherTypes = ["球威", "制球", "スタミナ"];

            let newType = playerData.type;
            let newStat1 = playerData.stat1;
            let newStat2 = playerData.stat2;
            let newStat3 = playerData.stat3;

            if (title === "好球必打") {
                newType = "ミート";
                newStat1 += 2;
                newStat3 += 1;
            }

            if (hitterTypes.includes(newType) || pitcherTypes.includes(newType)) {
                return { ...playerData, type: newType, stat1: newStat1, stat2: newStat2, stat3: newStat3 };
            } else {
                console.error("エラー: 適用後の type が無効です ->", newType);
                return playerData;
            }
        }



        function updateDisplay() {
            // 必要な要素を取得
            const totalComboElement = document.getElementById("totalCombo");
            const maxComboElement = document.getElementById("maxCombo");
            const comboList = document.getElementById("comboList");

            // 要素が見つからない場合のエラーハンドリング
            if (!totalComboElement || !maxComboElement || !comboList) {
                console.error("表示要素が見つかりません");
                return;
            }

            // 合計コンボ値を更新
            totalComboElement.textContent = comboTotal;

            // コンボをポイント値で降順にソート
            activatedCombos.sort((a, b) => {
                const valueA = parseInt(a.match(/\+(\d+)/)?.[1] || 0, 10);
                const valueB = parseInt(b.match(/\+(\d+)/)?.[1] || 0, 10);
                return valueB - valueA; // 降順
            });

            // コンボリストをクリア
            comboList.innerHTML = "";

            // コンボがない場合
            if (activatedCombos.length === 0) {
                comboList.textContent = "発動コンボ(上昇量): なし";
            } else {
                // ソート済みのコンボを個別に表示
                activatedCombos.forEach(combo => {
                    const comboItem = document.createElement("span");
                    comboItem.textContent = combo;
                    comboItem.className = "combo-item";
                    comboList.appendChild(comboItem);
                });
            }

            // 最大コンボ上昇量を計算
            let comboValues = activatedCombos.map(combo => {
                let match = combo.match(/\+(\d+)/);
                return match ? parseInt(match[1], 10) : 0;
            }).sort((a, b) => b - a);

            let A = comboValues.slice(0, 10).reduce((sum, value) => sum + value, 0);
            let B = comboValues.slice(10, 20).reduce((sum, value) => sum + value, 0);
            let maxComboIncrease = A + Math.floor(B * 0.1);

            // 最大コンボ上昇量を更新
            maxComboElement.textContent = maxComboIncrease;
        }

        // イベントリスナー設定
        document.addEventListener("DOMContentLoaded", () => {
            const playerSelects = document.querySelectorAll(".player");
            const titleSelects = document.querySelectorAll(".title");
            const positionSelects = document.querySelectorAll(".position");
            const tokushuInputs = document.querySelectorAll(".tokushu-input");

            playerSelects.forEach(select => {
                select.addEventListener("change", () => {
                    const row = select.closest("tr");
                    updatePlayerStats(Array.from(row.parentElement.children).indexOf(row), select.value, row.closest("table").id === "fielders-table" ? "#fielders-table" : "#pitchers-table");
                    calculateCombo();
                });
            });

            titleSelects.forEach(select => {
                select.addEventListener("change", () => {
                    const row = select.closest("tr");
                    applyTitleBonusToRow(row);
                    calculateTotalSpirits();
                    updateTypeCount();
                    calculateCombo();
                });
            });

            positionSelects.forEach(select => {
                select.addEventListener("change", () => {
                    calculateCombo();
                });
            });

            tokushuInputs.forEach(input => {
                input.addEventListener("change", () => {
                    const row = input.closest("tr");
                    const playerSelect = row.querySelector(".player");
                    const index = Array.from(row.parentElement.children).indexOf(row);
                    updatePlayerStats(index, playerSelect.value, "#fielders-table");
                    calculateCombo();
                });
            });

            calculateCombo();
        });


    </script>

</body>

</html>
